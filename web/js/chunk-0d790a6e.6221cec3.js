(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d790a6e"],{"0701":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"setting-box flex-1 overflow-hidden flex-vertical"},[i("el-form",{staticClass:"customized-form padding-top",attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addDepartment}},[t._v("添加部门")])],1),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addTeam}},[t._v("添加团队")])],1),i("el-form-item",{staticClass:"middle-item"},[i("el-input",{attrs:{placeholder:"请输入关键词搜索"},on:{input:function(e){return t.handleSearch(t.departmentQuery)}},model:{value:t.departmentQuery,callback:function(e){t.departmentQuery=e},expression:"departmentQuery"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1),i("customized-table",{ref:"customizedTable",staticClass:"flex-1 overflow-hidden flex-vertical customized-table",attrs:{loading:t.loading,Data:t.tableData,Header:t.header,total:t.total,"page-size":t.pageSize,"current-page":t.currentPage},on:{"size-change":function(a){t.pageSizeChange(t.tableLoad,e,a)},"current-change":function(a){t.pageChange(t.tableLoad,e,a)}}}),i("customized-dialog",{staticClass:"customized-dialog",attrs:{title:t.title,width:600,visible:t.visibleDepartmentDialog,showFooter:t.show},on:{close:t.resetDepartmentDialog,submit:function(e){"添加部门"==t.title?t.departmentSubmit("ruleForm"):t.teamSubmit("ruleForm")},cancel:t.departmentCancel}},[i("el-form",{ref:"ruleForm",staticClass:"dialog-form",attrs:{"label-width":"80px",model:t.ruleForm,rules:t.rules}},[i("el-form-item",{attrs:{label:"添加部门"==t.title?"部门名称":"团队名称",prop:"添加部门"==t.title?"departmentName":"teamName"}},["添加部门"==t.title?i("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入部门名称"},model:{value:t.ruleForm.departmentName,callback:function(e){t.$set(t.ruleForm,"departmentName",e)},expression:"ruleForm.departmentName"}}):i("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"请输入团队名称"},model:{value:t.ruleForm.teamName,callback:function(e){t.$set(t.ruleForm,"teamName",e)},expression:"ruleForm.teamName"}})],1),"添加团队"==t.title?i("el-form-item",{staticClass:"item",attrs:{label:"分配部门",prop:"optionTeam"}},[i("el-select",{attrs:{placeholder:"请选择部门名称"},on:{change:function(e){return t.handleTeam(t.ruleForm.optionTeam)}},model:{value:t.ruleForm.optionTeam,callback:function(e){t.$set(t.ruleForm,"optionTeam",e)},expression:"ruleForm.optionTeam"}},t._l(t.departmentType,(function(e,t){return i("el-option",{key:t,attrs:{label:e.department_name,value:e.department_id}})})),1)],1):t._e(),i("el-form-item",{attrs:{label:"添加部门"==t.title?"部门详情":"团队详情"}},["添加部门"==t.title?i("el-input",{staticClass:"dialog-textarea",attrs:{placeholder:"请填写内容，字数不超过50",type:"textarea",maxlength:"50","show-word-limit":""},model:{value:t.departmentDetail,callback:function(e){t.departmentDetail=e},expression:"departmentDetail"}}):i("el-input",{staticClass:"dialog-textarea",attrs:{placeholder:"请填写内容，字数不超过50",type:"textarea",maxlength:"50","show-word-limit":""},model:{value:t.teamDetail,callback:function(e){t.teamDetail=e},expression:"teamDetail"}})],1)],1)],1)],1)},r=[],n=(a("f8c2"),a("22f7"),a("4bbd")),l=a("d360"),o=[{prop:"group_id",label:"编号"},{prop:"department_name",label:"部门名称"},{prop:"group_name",label:"团队名称"}],s=o,d=a("ddfc"),m={name:"TeamSetting",mixins:[n["a"],l["a"],d["a"]],created:function(){this.header=s,this.tableLoad()},data:function(){return{ruleForm:{departmentName:"",teamName:"",optionTeam:""},title:"",departmentQuery:"",departmentDetail:"",teamDetail:"",departmentID:"",visibleDepartmentDialog:!1,tableData:[],show:!0,rules:{departmentName:[{required:!0,message:"请输入部门名称"}],optionTeam:[{required:!0,message:"请选择分配部门"}],teamName:[{required:!0,message:"请输入团队名称"}]}}},methods:{handleSearch:function(){this.axiosTable(),this.throttle(this.tableLoad,this,500)},resetDepartmentData:function(){this.ruleForm.departmentName="",this.departmentDetail=""},resetTeamData:function(){this.ruleForm.teamName="",this.teamDetail="",this.ruleForm.optionTeam=""},handleTeam:function(e){this.department_id=e},axiosTable:function(e){return this.$http.get("/group/list",{params:{keyword:this.departmentQuery,page:e,page_size:this.pageSize}})},tableLoad:function(e){var t=this;this.loading=!0,this.axiosTable(e).then((function(a){a&&200===a.data.code&&(t.total=Number(a.data.data.pagination.total),t.tableData=a.data.data.list,t.currentPage=e)}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){t.loading=!1}))},addDepartment:function(){this.title="添加部门",this.visibleDepartmentDialog=!0},resetDepartmentDialog:function(){this.resetDepartmentData(),this.resetTeamData(),this.visibleDepartmentDialog=!1,this.$refs["ruleForm"].resetFields()},addTeam:function(){this.title="添加团队",this.visibleDepartmentDialog=!0},departmentSubmit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&e.$http.post("/department/create",{name:e.ruleForm.departmentName,desc:e.ruleForm.departmentDetail}).then((function(t){200===t.data.code&&(e.$message({message:"添加成功",type:"success"}),e.visibleDepartmentDialog=!1,e.handleDepartment(),e.resetDepartmentData(),e.$refs["ruleForm"].resetFields())}))}))},teamSubmit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){t&&e.$http.post("/group/create",{name:e.ruleForm.teamName,desc:e.teamDetail,department_id:e.department_id}).then((function(t){200===t.data.code&&(e.$message({message:"添加成功",type:"success"}),e.visibleDepartmentDialog=!1,e.tableLoad(),e.resetTeamData(),e.$refs["ruleForm"].resetFields())}))}))},departmentCancel:function(){this.resetDepartmentData(),this.resetTeamData(),this.visibleDepartmentDialog=!1,this.$refs["ruleForm"].resetFields()}}},u=m,p=(a("3b26"),a("cba8")),c=Object(p["a"])(u,i,r,!1,null,"49369add",null);t["default"]=c.exports},"3b26":function(e,t,a){"use strict";a("4150")},"3c42":function(e,t,a){var i=a("9c15"),r=a("8655"),n=a("24bc"),l=a("51c1"),o=a("6532"),s=a("b072"),d=/MSIE .\./.test(o),m=r.Function,u=function(e){return function(t,a){var i=arguments.length>2,r=i?s(arguments,2):void 0;return e(i?function(){n(l(t)?t:m(t),this,r)}:t,a)}};i({global:!0,bind:!0,forced:d},{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},4150:function(e,t,a){},"4bbd":function(e,t,a){"use strict";t["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(e,t,a){this.currentPage=a,e.call(t,a)},pageSizeChange:function(e,t,a){this.pageSize=a,this.pageChange(e,t,1)}}}},d360:function(e,t,a){"use strict";t["a"]={data:function(){return{channels:[{item:"头条数据",id:1},{item:"快手数据",id:2}],materialType:[],mediaType:[],orderType:[],operation:[],optimizer:[],material_optimizer:[],optimizerGroup:[],productNameType:[],isHidden:[{label:"已隐藏",value:"1"},{label:"未隐藏",value:"0"}],productIndustry:[],groupType:[],demandType:[],productLineOptions:[{label:"华为",value:"华为"},{label:"小米",value:"小米"}],departmentType:[],needRuleForm:{group_id:""},memberList:[],origins:[{label:"订单",value:0},{label:"本地",value:1}],labelList:[]}},mounted:function(){this.handleProductID(),this.handleGroupID(),this.handleDepartment(),this.handleOperation(),this.handleOptimizer(),this.handleOptimizerGroup(),this.handleMemberList(),this.handleLabelList(),this.handleMaterialOptimizer()},methods:{handleLabelList:function(){var e=this;return this.$http.get("/media/media/label-list",{params:{}}).then((function(t){t&&(e.labelList=t.data.data)}))},handleProductID:function(){var e=this;this.$http.get("/order/order-dictionary",{params:{order:"id",sort:"asc"}}).then((function(t){200===t.data.code&&(e.materialType=t.data.data.material_type,e.mediaType=t.data.data.media,e.orderType=t.data.data.order_type,e.productNameType=t.data.data.product_name,e.productIndustry=t.data.data.product_industry,e.demandType=t.data.data.demand_type)}))},handleOperation:function(){var e=this;this.$http.get("/role/operation-list").then((function(t){200===t.data.code&&(e.operation=t.data.data)}))},handleOptimizer:function(){var e=this;this.$http.get("/role/optimizer-list").then((function(t){200===t.data.code&&(e.optimizer=t.data.data)}))},handleMaterialOptimizer:function(){var e=this;this.$http.get("/role/uploader-list").then((function(t){200===t.data.code&&(e.material_optimizer=t.data.data)}))},handleOptimizerGroup:function(){var e=this;this.$http.get("/role/optimizer-group-list").then((function(t){200===t.data.code&&(e.optimizerGroup=t.data.data.list.options)}))},handleGroupID:function(){var e=this;this.$http.get("/group/list",{params:{order:"create_time",sort:"desc",page_size:100}}).then((function(t){200===t.data.code&&(e.groupType=t.data.data.list)}))},handleDepartment:function(){var e=this;this.$http.get("/department/list").then((function(t){200===t.data.code&&(e.departmentType=t.data.data)}))},handleMemberList:function(){var e=this;this.$http.get("/role/list").then((function(t){200===t.data.code&&(e.memberList=t.data.data)}))}}}},ddfc:function(e,t,a){"use strict";a("3c42"),a("8c17");t["a"]={data:function(){return{timerId:0}},methods:{throttle:function(e,t,a){for(var i=arguments.length,r=new Array(i>3?i-3:0),n=3;n<i;n++)r[n-3]=arguments[n];clearTimeout(t.timerId),a=a||200,t.timerId=setTimeout((function(){e.apply(t,r)}),a)},clearTimer:function(){clearTimeout(this.timerId)}},destroyed:function(){this.clearTimer()}}}}]);