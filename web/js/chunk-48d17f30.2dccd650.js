(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48d17f30"],{"093a":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a("5422"),s=a("430a"),l=a("e6ef"),o=a.n(l);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"复制成功",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"复制失败...";this.$copyText(e).then((function(e){t&&i["Message"].success(t)}))["catch"]((function(e){a&&i["Message"].error(a)}))}o.a.config.autoSetContainer=!0,s["default"].use(o.a)},"10f9":function(e,t,a){},"1fb8":function(e,t,a){},2289:function(e,t,a){"use strict";a("71d2")},"497b":function(e,t,a){"use strict";a("7b45")},"4bbd":function(e,t,a){"use strict";t["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(e,t,a){this.currentPage=a,e.call(t,a)},pageSizeChange:function(e,t,a){this.pageSize=a,this.pageChange(e,t,1)}}}},"50b3":function(e,t,a){},5441:function(e,t,a){},"552e":function(e,t,a){"use strict";a("1fb8")},6890:function(e,t,a){"use strict";a("10f9")},"6b9a":function(e,t,a){"use strict";t["a"]={data:function(){return{dialogVisible:!1,dialogTitle:""}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.$emit("dialogClose")}}}},"71d2":function(e,t,a){},"7b45":function(e,t,a){},"7b65":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("customized-dialog",{staticClass:"text-dialog",attrs:{visible:e.dialogVisible,title:e.title,"show-footer":e.showFooter,width:500},on:{cancel:e.closeDialog,submit:function(t){return e.$emit("success")},close:e.closeDialog}},[a("p",{staticClass:"text-desc",class:e.textClass},[e._v(e._s(e.text))])])},s=[],l=a("6b9a"),o={name:"TextDialog",mixins:[l["a"]],props:{showFooter:{type:Boolean,default:!1},showCancel:{type:Boolean,default:!1},title:{type:String,default:"提示"},textClass:{type:String,default:""},text:{type:String,default:""}}},n=o,r=a("cba8"),c=Object(r["a"])(n,i,s,!1,null,"77430c96",null);t["a"]=c.exports},"8da3":function(e,t,a){"use strict";a("5441")},a80e:function(e,t,a){"use strict";a("50b3")},d360:function(e,t,a){"use strict";t["a"]={data:function(){return{channels:[{item:"头条数据",id:1},{item:"快手数据",id:2}],materialType:[],mediaType:[],orderType:[],operation:[],optimizer:[],material_optimizer:[],optimizerGroup:[],productNameType:[],isHidden:[{label:"已隐藏",value:"1"},{label:"未隐藏",value:"0"}],productIndustry:[],groupType:[],demandType:[],productLineOptions:[{label:"华为",value:"华为"},{label:"小米",value:"小米"}],departmentType:[],needRuleForm:{group_id:""},memberList:[],origins:[{label:"订单",value:0},{label:"本地",value:1}],labelList:[]}},mounted:function(){this.handleProductID(),this.handleGroupID(),this.handleDepartment(),this.handleOperation(),this.handleOptimizer(),this.handleOptimizerGroup(),this.handleMemberList(),this.handleLabelList(),this.handleMaterialOptimizer()},methods:{handleLabelList:function(){var e=this;return this.$http.get("/media/media/label-list",{params:{}}).then((function(t){t&&(e.labelList=t.data.data)}))},handleProductID:function(){var e=this;this.$http.get("/order/order-dictionary",{params:{order:"id",sort:"asc"}}).then((function(t){200===t.data.code&&(e.materialType=t.data.data.material_type,e.mediaType=t.data.data.media,e.orderType=t.data.data.order_type,e.productNameType=t.data.data.product_name,e.productIndustry=t.data.data.product_industry,e.demandType=t.data.data.demand_type)}))},handleOperation:function(){var e=this;this.$http.get("/role/operation-list").then((function(t){200===t.data.code&&(e.operation=t.data.data)}))},handleOptimizer:function(){var e=this;this.$http.get("/role/optimizer-list").then((function(t){200===t.data.code&&(e.optimizer=t.data.data)}))},handleMaterialOptimizer:function(){var e=this;this.$http.get("/role/uploader-list").then((function(t){200===t.data.code&&(e.material_optimizer=t.data.data)}))},handleOptimizerGroup:function(){var e=this;this.$http.get("/role/optimizer-group-list").then((function(t){200===t.data.code&&(e.optimizerGroup=t.data.data.list.options)}))},handleGroupID:function(){var e=this;this.$http.get("/group/list",{params:{order:"create_time",sort:"desc",page_size:100}}).then((function(t){200===t.data.code&&(e.groupType=t.data.data.list)}))},handleDepartment:function(){var e=this;this.$http.get("/department/list").then((function(t){200===t.data.code&&(e.departmentType=t.data.data)}))},handleMemberList:function(){var e=this;this.$http.get("/role/list").then((function(t){200===t.data.code&&(e.memberList=t.data.data)}))}}}},faa9:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"setting-box flex-vertical flex-1 overflow-hidden"},[i("material-info-form",{attrs:{isVideo:t.isVideo,isDisable:t.disableMultiOp},on:{search:t.searchFn,command:t.operations}}),i("material-content",{ref:"materialContent",staticClass:"flex-1 overflow-hidden",attrs:{List:t.materialList,ListLoading:t.loading,isVideo:t.isVideo,totalNum:t.total,currentPage:t.currentPage,"page-size":t.pageSize},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},itemClick:t.handleClick,checkChange:t.checkChange,"size-change":function(a){t.pageSizeChange(t.materialListLoad,e,a)},"current-change":function(a){t.pageChange(t.materialListLoad,e,a)}}}),t.isVideo?i("video-detail-info",{ref:"detailInfo",attrs:{info:t.curItem},on:{addLabel:function(e){return t.openDialog("addLabel")},dialogClose:t.resetSingleOp}}):i("picture-detail-info",{ref:"detailInfo",attrs:{info:t.curItem},on:{addLabel:function(e){return t.openDialog("addLabel")},dialogClose:t.resetSingleOp}}),i("add-label-dialog",{ref:"addLabel",attrs:{"media-id":t.mediaId,"label-id":t.curItem.label_ids,"is-multi-op":t.isMultiOp},on:{"update:labelId":function(e){return t.$set(t.curItem,"label_ids",e)},"update:label-id":function(e){return t.$set(t.curItem,"label_ids",e)},success:t.handleAddLabelSuccess,dialogClose:t.resetMultiOp}}),i("message-push-dialog",{ref:"messagePush",attrs:{"media-id":t.mediaId},on:{success:t.handleSuccess,dialogClose:t.resetOp}}),t.isVideo?i("video-share-dialog",{ref:"share",attrs:{"is-multi-op":t.isMultiOp,"material-id":t.mediaId,"material-list":t.materialList,url:t.curItem.resource_url},on:{dialogClose:t.handleCopySuccess}}):t._e(),i("delete-material-dialog",{ref:"deleteMaterial",attrs:{"media-id":t.mediaId},on:{success:function(){e.materialListLoad(1)},dialogClose:t.resetOp}}),i("text-dialog",{ref:"textDialog",attrs:{text:t.dialogText}})],1)},s=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"searchForm",staticClass:"customized-form padding-top",attrs:{model:e.searchForm,inline:!0,"label-width":"90px"}},[a("el-form-item",{attrs:{prop:"product"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"产品",multiple:"","collapse-tags":"",clearable:""},model:{value:e.searchForm.product,callback:function(t){e.$set(e.searchForm,"product",t)},expression:"searchForm.product"}},e._l(e.productNameType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.item,value:e.id}})})),1)],1),a("el-form-item",{attrs:{prop:"product_industry"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"行业",filterable:"",multiple:"","collapse-tags":"",clearable:""},model:{value:e.searchForm.product_industry,callback:function(t){e.$set(e.searchForm,"product_industry",t)},expression:"searchForm.product_industry"}},e._l(e.productIndustry,(function(e,t){return a("el-option",{key:t,attrs:{label:e.item,value:e.id}})})),1)],1),a("el-form-item",{attrs:{prop:"optimizer_id"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"上传人",multiple:"","collapse-tags":"",clearable:""},model:{value:e.searchForm.optimizer_id,callback:function(t){e.$set(e.searchForm,"optimizer_id",t)},expression:"searchForm.optimizer_id"}},e._l(e.material_optimizer,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name?e.name:e.username,value:e.id}})})),1)],1),a("el-form-item",{attrs:{prop:"creatives"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"创意人员",filterable:"",multiple:"","collapse-tags":"","popper-class":"creatives",clearable:""},model:{value:e.searchForm.creatives,callback:function(t){e.$set(e.searchForm,"creatives",t)},expression:"searchForm.creatives"}},e._l(e.optimizerGroup,(function(t,i){return a("el-option-group",{key:i,attrs:{label:t.duty}},e._l(t.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.userTypeRoute&e.ADMIN_ROUTE_MASK,expression:"(userTypeRoute&ADMIN_ROUTE_MASK)"}],attrs:{prop:"all_videoTeam"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"团队",multiple:"","collapse-tags":"",clearable:""},on:{change:function(e){}},model:{value:e.searchForm.all_videoTeam,callback:function(t){e.$set(e.searchForm,"all_videoTeam",t)},expression:"searchForm.all_videoTeam"}},e._l(e.groupType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.group_name,value:e.group_id}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.userTypeRoute&e.ADMIN_ROUTE_MASK,expression:"(userTypeRoute&ADMIN_ROUTE_MASK)"}],attrs:{prop:"all_videoDepartment"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"部门",multiple:"","collapse-tags":"",clearable:""},on:{change:function(e){}},model:{value:e.searchForm.all_videoDepartment,callback:function(t){e.$set(e.searchForm,"all_videoDepartment",t)},expression:"searchForm.all_videoDepartment"}},e._l(e.departmentType,(function(e,t){return a("el-option",{key:t,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),a("el-form-item",{attrs:{prop:"label_ids"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"标签",filterable:"",multiple:"","collapse-tags":"",clearable:""},on:{"visible-change":e.handleLabelList},model:{value:e.searchForm.label_ids,callback:function(t){e.$set(e.searchForm,"label_ids",t)},expression:"searchForm.label_ids"}},e._l(e.labelList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label_name,value:e.label_id}})})),1)],1),a("el-form-item",{attrs:{prop:"origin_id"}},[a("el-select",{staticClass:"middle-item",attrs:{placeholder:"来源",clearable:""},model:{value:e.searchForm.origin_id,callback:function(t){e.$set(e.searchForm,"origin_id",t)},expression:"searchForm.origin_id"}},e._l(e.origins,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticClass:"search-content",attrs:{prop:"selectValue",required:!1}},[a("el-input",{staticClass:"long-item input-with-select",attrs:{placeholder:e.isVideo?"请输入视频名称":"请输入图片名称"},model:{value:e.searchForm.inputValue,callback:function(t){e.$set(e.searchForm,"inputValue",t)},expression:"searchForm.inputValue"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"选择类型"},slot:"prepend",model:{value:e.searchForm.selectValue,callback:function(t){e.$set(e.searchForm,"selectValue",t)},expression:"searchForm.selectValue"}},e._l(e.selectType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.searchFn}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1),e.showShare?a("div",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.uploadMaterial}},[a("span",{staticClass:"iconfont"},[e._v("")]),e._v("上传素材")])],1),a("el-form-item",[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.operations}},[a("el-button",{attrs:{disabled:e.isDisable,type:"primary",plain:""}},[a("span",{staticClass:"iconfont icon-push"},[e._v("")]),e._v("批量操作")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.showPush?a("el-dropdown-item",{attrs:{command:"messagePush"}},[e._v("推送")]):e._e(),e.isVideo?a("el-dropdown-item",{attrs:{command:"share"}},[e._v("分享")]):e._e(),a("el-dropdown-item",{attrs:{command:"addLabel"}},[e._v("添加标签")])],1)],1)],1)],1):e._e()],1)},o=[],n=a("cc64"),r=(a("141e"),a("47e8"),a("d360")),c=a("7736"),d=a("0a06"),u=a("07a4"),m=function(){return Boolean(u["a"].state.global.userTypeRoute&d["OPERATE_INTERGRATED_MASK"])},h=function(){return!(u["a"].state.global.userTypeRoute&d["ADMIN_ROUTE_MASK"])},p=function(e){return 1===e.origin_id&&!(u["a"].state.global.userTypeRoute&d["ADMIN_ROUTE_MASK"])},f={name:"MaterialInfoForm",mixins:[r["a"]],props:{isVideo:{type:Boolean,default:!0},isDisable:{type:Boolean,default:!0}},computed:Object(n["a"])({showShare:h,showPush:m},Object(c["b"])({userTypeRoute:function(e){return e.global.userTypeRoute}})),deactivated:function(){this.resetForm("searchForm")},data:function(){return{ADMIN_ROUTE_MASK:d["ADMIN_ROUTE_MASK"],searchForm:{product:[],optimizer_id:[],creatives:[],origin_id:"",label_ids:[],all_videoTeam:[],all_videoDepartment:[],selectValue:1,inputValue:""},all_videoTeams:[{item:"头条数据",id:1},{item:"快手数据",id:2}],selectType:[{label:this.isVideo?"视频名称":"图片名称",value:1}],videoTeam:""}},methods:{searchFn:function(){this.$emit("search",{product_id:this.searchForm.product.join(","),industry_id:this.searchForm.product_industry.join(","),user_id:this.searchForm.optimizer_id.join(","),creatives:this.searchForm.creatives.join(","),origin_id:this.searchForm.origin_id,label_ids:this.searchForm.label_ids.join(","),all_videoTeam:this.searchForm.all_videoTeam.join(","),all_videoDepartment:this.searchForm.all_videoDepartment.join(","),file_name:this.searchForm.inputValue.trim()})},resetForm:function(e){this.$refs[e].resetFields(),this.searchForm.inputValue=""},uploadMaterial:function(){this.$router.push({name:"uploadMaterial"})},operations:function(e){this.$emit("command",e)}}},g=f,b=(a("497b"),a("cba8")),v=Object(b["a"])(g,l,o,!1,null,"15c844b5",null),_=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-vertical"},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.ListLoading,expression:"ListLoading"}],staticClass:"rank-list flex-1 content",attrs:{type:"flex",gutter:16}},[0===e.List.length?a("div",{staticClass:"noData"},[a("span",[e._v("暂无数据")])]):e._e(),e._l(e.List,(function(t,i){return a("el-col",{key:i,staticClass:"rank-item",attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("div",{staticClass:"rank-item-wrapper"},[a("el-row",{staticClass:"video-box position-relative",attrs:{type:"flex",justify:"center"}},[a("el-row",{staticClass:"video-title"},[e.showShare?a("el-col",{staticClass:"medal",attrs:{span:2,offset:22}},[a("el-checkbox",{on:{change:function(a){e.handleCheck(a,t)}},model:{value:t.checkboxValue,callback:function(a){e.$set(t,"checkboxValue",a)},expression:"item.checkboxValue"}},[e._v(e._s(""))])],1):e._e()],1),e.isVideo?a("video",{key:t.url,ref:"video"+i,refInFor:!0,staticClass:"video-isPlay",attrs:{height:"170",src:t.resource_url},on:{click:function(a){return e.$emit("itemClick",t,"detailInfo")}}},[e._v(" 您的浏览器不支持 HTML5 video 标签。 ")]):a("el-image",{ref:"pic"+i,refInFor:!0,staticClass:"video-isPlay",attrs:{src:t.resource_url,height:"170"},on:{click:function(a){return e.$emit("itemClick",t,"detailInfo")}}}),e.isVideo?a("el-row",{staticClass:"video-play"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pointer",on:{click:function(a){return e.$emit("itemClick",t,"detailInfo")}}},[a("svg-icon",{attrs:{"icon-name":"play"}})],1)])],1):e._e()],1),a("el-row",{staticClass:"rank-title"},[a("el-col",{staticClass:"uniform-title pointer",attrs:{span:24}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isClickEdit,expression:"!item.isClickEdit"}],staticClass:"file-name"},[a("span",{staticClass:"m-r-24",attrs:{title:t.filename}},[e._v(e._s(e._f("handleLength")(t.filename,15)))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isClickEdit,expression:"item.isClickEdit"}],staticClass:"name-input"},[a("el-input",{attrs:{size:"small",placeholder:"请输入文件名"},on:{blur:function(){t.filename.trim()&&(t.isClickEdit=!1,e.editFileName(t.id,t.filename))}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:function(e){return e.target.blur()}.apply(null,arguments)}},model:{value:t.filename,callback:function(a){e.$set(t,"filename",a)},expression:"item.filename"}})],1)])],1),a("el-row",{staticClass:"rank-desc"},[a("el-col",{attrs:{span:6,xs:12,sm:12}},[a("div",{staticStyle:{height:"1px"}})]),a("el-col",{attrs:{span:6,xs:12,sm:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPush,expression:"showPush"}],staticClass:"operationDiv pointer push-icon",attrs:{title:"推送"},on:{click:function(a){return e.$emit("itemClick",t,"messagePush")}}},[a("svg-icon",{attrs:{"icon-name":"messagepush"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isVideo&&e.showShare,expression:"isVideo&&showShare"}],staticClass:"operationDiv pointer",attrs:{title:"分享"},on:{click:function(a){return e.$emit("itemClick",t,"share")}}},[a("svg-icon",{attrs:{"icon-name":"share"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDelete(t),expression:"showDelete(item)"}],staticClass:"operationDiv pointer",attrs:{title:"删除"},on:{click:function(a){return e.$emit("itemClick",t,"deleteMaterial")}}},[a("svg-icon",{attrs:{"icon-name":"deletematerial"}})],1)])],1)],1)])}))],2),a("el-pagination",{staticClass:"m-t-30 text-center",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":e.pageSizes,total:e.totalNum},on:{"size-change":function(t){e.$emit("size-change",t),e.$emit("page-size:update",t)},"current-change":function(t){e.$emit("current-change",t),e.$emit("current-page:update",t)}}})],1)},C=[],L=(a("22f7"),a("f8c2"),a("13d8"),a("e4de"),a("b00a"),a("c08f"),a("09ed"),{name:"MaterialContent",props:{List:{type:Array,default:null},ListLoading:{type:Boolean,default:!1},isVideo:{type:Boolean,default:!0},totalNum:Number,currentPage:Number,pageSize:Number},deactivated:function(){this.clearCheck()},data:function(){return{checkSet:new Set,pageSizes:[12,20,30,40,50,100],isClickEdit:!1}},computed:{showPush:m,showShare:h},methods:{showDelete:p,editFileName:function(e,t){this.axiosRename(e,t).then((function(e){e&&e.data.code}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){}))},handleCheck:function(e,t){var a=t.id;t.checkboxValue=e,e?this.checkSet.add(a):this.checkSet["delete"](a);var i=[];this.checkSet.forEach((function(e){i.push(e)})),this.$emit("checkChange",i)},clearCheck:function(){this.checkSet.clear(),this.List.forEach((function(e){e.checkboxValue=!1})),this.$emit("checkChange",[])},axiosRename:function(e,t){return this.$http.post("/media/media/update-media-name",{media_id:e,file_name:t})}}}),k=L,w=(a("a80e"),Object(b["a"])(k,y,C,!1,null,"70ebe9af",null)),x=w.exports,F=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("customized-dialog",{staticClass:"customized-dialog",attrs:{title:t.dialogTitle,visible:t.dialogVisible,"show-footer":!0,width:600},on:{cancel:t.closeDialogCallback,submit:t.submit,close:t.closeDialogCallback}},[i("el-form",{ref:"addForm",staticClass:"dialog-form",attrs:{"element-loading-background":"transparent",model:t.addForm,rules:t.addRules,"label-width":"80px","label-position":"right"}},[i("el-form-item",{attrs:{label:"选择标签",prop:"addList"}},[i("el-select",{attrs:{loading:t.labelLoading,placeholder:"请选择",multiple:"","collapse-tags":"",clearable:""},model:{value:t.addForm.addList,callback:function(e){t.$set(t.addForm,"addList",e)},expression:"addForm.addList"}},[t._l(t.labelList,(function(e){return i("el-option",{key:e.label_id,attrs:{label:e.label_name,value:e.label_id,disabled:e.disabled}})})),i("div",{staticClass:"m-l-r-10 add-label",attrs:{slot:t.labelList.length?null:"empty"},slot:t.labelList.length?null:"empty"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isClickAddNewLabel,expression:"!isClickAddNewLabel"}],staticClass:"add-new-label customized-button pointer",on:{click:function(){e.isClickAddNewLabel=!0}}},[t._v("+添加新标签 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isClickAddNewLabel,expression:"isClickAddNewLabel"}],staticClass:"add-label-input"},[i("el-input",{attrs:{placeholder:"请输入内容",maxlength:"20",clearable:!1},model:{value:t.inputLabel,callback:function(e){t.inputLabel=e},expression:"inputLabel"}}),i("el-button",{attrs:{type:"text",size:"mini",disabled:!t.inputLabel},on:{click:t.addLabel}},[t._v("确定")]),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){e.isClickAddNewLabel=!1,e.inputLabel=""}}},[t._v("取消")])],1)])],2)],1)],1)],1)},D=[],$=(a("ecb9"),a("6b9a")),S={name:"AddLabelDialog",mixins:[$["a"]],data:function(){return{isClickAddNewLabel:!1,labelLoading:!1,labelList:[],addForm:{addList:[]},addRules:{addList:[{required:!0,message:"标签不能为空"}]},inputLabel:""}},props:{mediaId:{type:[String,Array,Number],required:!0},labelId:{type:Array,default:[]},isMultiOp:{type:Boolean}},watch:{dialogVisible:{handler:function(e){e&&(this.clearValidate(),this.getLabelList())}},labelId:{handler:function(e){this.addForm.addList=e}},isMultiOp:function(e){this.dialogTitle=e?"批量添加标签":"添加标签"}},methods:{axiosAddLabel:function(){return this.$http.post("/media/media/add-label",{label_name:this.inputLabel})},labelBind:function(){var e,t={};return 1===this.mediaId.length?(e="/media/media/media-label",t.media_id=this.mediaId.join(",")):(e="/media/media/batch-media-label",t.media_ids=this.mediaId.join(",")),t.label_ids=this.addForm.addList.join(","),this.$http.post(e,t)},axiosLabel:function(){return this.$http.get("/media/media/label-list",{params:{}})},getLabelList:function(){var e=this;this.axiosLabel().then((function(t){200===t.data.code&&(e.labelList=t.data.data,e.labelList.forEach((function(t){t.disabled=e.addForm.addList.some((function(e){return e===t.label_id}))})))}))["catch"]((function(e){console.warn(e)}))},addLabel:function(){var e=this;this.labelLoading=!0,this.axiosAddLabel().then((function(t){200===t.data.code&&(e.isClickAddNewLabel=!1,e.inputLabel="",e.getLabelList())}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){e.labelLoading=!1}))},resetFields:function(){this.$refs.addForm&&this.$refs.addForm.resetFields()},clearValidate:function(){this.$refs.addForm&&this.$refs.addForm.clearValidate()},submit:function(){var e=this;this.$refs.addForm.validate((function(t){t&&e.labelBind().then((function(t){if(200===t.data.code){e.$emit("update:labelId",e.addForm.addList);var a=t.data.data.label?t.data.data.label:"";e.$emit("success",a),e.closeDialog()}}))}))},closeDialogCallback:function(){this.labelList=[],this.closeDialog()}}},I=S,z=(a("552e"),Object(b["a"])(I,F,D,!1,null,"0c28561b",null)),O=z.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("customized-dialog",{staticClass:"dialog-without-title customized-dialog",attrs:{title:"",visible:e.dialogVisible,width:600},on:{close:e.closeDialog}},[a("div",{staticClass:"info"},[a("el-image",{key:e.info.resource_url,staticClass:"video-isPlay",attrs:{src:e.info.resource_url}}),a("div",[e._v("来源: "),a("span",[e._v(e._s(e.info.origin_name))])]),a("div",[e._v("上传人: "),a("span",[e._v(e._s(e.info.user_name))])]),a("div",[e._v("行业: "),a("span",[e._v(e._s(e.info.industry))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showShare,expression:"showShare"}]},[e._v("标签："),a("span",[e._v(e._s(e.info.label))]),a("span",{staticClass:"addLabel pointer",on:{click:function(){e.$emit("addLabel")}}},[e._v("+添加标签")])])],1)])},M=[],V={name:"PictureDetailInfo",mixins:[$["a"]],computed:{showShare:h},props:{info:{type:Object,default:function(){return{resource_url:"",origin_name:"",user_name:"",label:""}}}}},A=V,N=(a("6890"),Object(b["a"])(A,T,M,!1,null,"77290052",null)),P=N.exports,E=(a("1ae6"),a("4bbd")),j="已为选择的视频添加标签，请点击视频进入详情查看。",R={mixins:[E["a"]],data:function(){return{materialList:[],checkList:[],searchForm:{product_id:"",user_id:"",creatives:"",origin_id:""},curItem:{id:"",label_ids:[],filename:"",resource_url:"",label:""},curItemBack:null,isMultiOp:!1,dialogText:""}},created:function(){this.curItemBack=Object.assign({},this.curItem),this.pageSize=12},computed:{disableMultiOp:function(){return!this.checkList.length},mediaId:function(){return this.curItem.id?[this.curItem.id]:this.checkList}},methods:{handleClick:function(e,t){this.curItem=e,this.isMultiOp=!1,this.openDialog(t)},openDialog:function(e){this.$refs[e]&&this.$refs[e].openDialog()},openTextDialog:function(e){this.dialogText=e,this.openDialog("textDialog")},handleAddLabelSuccess:function(e){this.isMultiOp?(this.openTextDialog(j),this.handleSuccess()):(this.$message.success("标签绑定成功"),this.curItem.label=e)},handleSuccess:function(){this.isMultiOp&&(this.clearCheck(),this.materialListLoad(this.currentPage))},handleCopySuccess:function(){this.resetOp(),this.clearCheck()},clearCheck:function(){this.$refs.materialContent.clearCheck()},operations:function(e){this.isMultiOp=!0,this.openDialog(e)},checkChange:function(e){this.checkList=e},resetMultiOp:function(){this.isMultiOp=!1},resetSingleOp:function(){this.curItem=this.curItemBack},resetOp:function(){this.isMultiOp?this.resetMultiOp():this.resetSingleOp()},searchFn:function(e){this.searchForm=e,this.materialListLoad(1)},materialListLoad:function(e){var t=this;this.materialList=[],this.loading=!0,this.axiosMaterialList(e).then((function(a){200===a.data.code&&0!==a.data.data.list.length&&(t.materialList=a.data.data.list.map((function(e){return e.checkboxValue=!1,e.isClickEdit=!1,e.newTitle="",e}))),t.total=Number(a.data.data.pagination.totalCount),t.currentPage=e}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){t.loading=!1}))}}},B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("customized-dialog",{staticClass:"deleteDialog",attrs:{visible:e.dialogVisible,"show-footer":!0,width:507},on:{cancel:e.closeDialog,submit:e.subDeletePic,close:e.closeDialog}},[a("p",{staticStyle:{"text-align":"left",margin:"-6px 0 24px 5px"}},[e._v("确定删除选中的素材吗？")])])},K=[],H={name:"DeleteMaterialDialog",mixins:[$["a"]],props:{mediaId:Array},methods:{subDeletePic:function(){var e=this;this.axiosDelete(this.mediaId.join(",")).then((function(t){200===t.data.code&&(e.$message({message:"删除成功",type:"success"}),e.closeDialog(),e.$emit("success"))}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){}))},axiosDelete:function(e){return this.$http.post("/media/media/delete-media",{media_ids:e})}}},G=H,U=Object(b["a"])(G,B,K,!1,null,"015a5b4a",null),q=U.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("customized-dialog",{staticClass:"customized-dialog",attrs:{title:"推送至其他平台",visible:e.dialogVisible,width:600,showFooter:!0},on:{cancel:e.closeDialogHandler,submit:function(t){return e.subSend("addForm")},close:e.closeDialogHandler}},[a("el-form",{ref:"addForm",staticClass:"dialog-form",attrs:{"element-loading-background":"transparent",model:e.addForm,rules:e.addRules,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"选择渠道",prop:"channel"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.channel,callback:function(t){e.$set(e.addForm,"channel",t)},expression:"addForm.channel"}},e._l(e.channels,(function(e){return a("el-option",{key:e.item,attrs:{label:e.item,value:e.id}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.addForm.channel,expression:"addForm.channel"}],attrs:{label:"投放账户",prop:"pid"}},[a("el-select",{directives:[{name:"loadmore",rawName:"v-loadmore",value:e.headLineScroll,expression:"headLineScroll"}],attrs:{filterable:"",remote:"",multiple:"","popper-append-to-body":!1,"remote-method":e.headLineSearch,placeholder:"选择账户ID"},on:{"visible-change":function(t){return e.headLineSearch("")}},model:{value:e.addForm.pid,callback:function(t){e.$set(e.addForm,"pid",t)},expression:"addForm.pid"}},e._l(e.optionsHeadlineAccount,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.advertiser_id}})})),1)],1)],1)],1)},Q=[],W=a("7980"),X={name:"MessagePushDialog",mixins:[$["a"]],data:function(){return{addForm:{channel:"",pid:[]},addRules:{channel:[{required:!0,message:"渠道不能为空"}],pid:[{required:!0,message:"投放账户不能为空"}]},optionsHeadlineAccount:[],channels:[{item:"头条数据",id:1},{item:"快手数据",id:2}],advertiserKey:"",curAdvertiserPage:0,totalAdvertiser:0}},props:{mediaId:Array},methods:{headLineSearch:function(e){this.optionsHeadlineAccount=[],this.advertiserKey=e,this.headLineChange(e)},headLineChange:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$http.get("/user/advertiser/list",{params:{page:a,page_size:10,search:t,channel:this.addForm.channel}}).then((function(t){var a;200===t.data.code&&(e.curAdvertiserPage=t.data.data.pagination.current_page,e.totalAdvertiser=t.data.data.pagination.page_count,(a=e.optionsHeadlineAccount).push.apply(a,Object(W["a"])(t.data.data.list)))}))},headLineScroll:function(){this.totalAdvertiser<this.curAdvertiserPage+1||this.headLineChange(this.advertiserKey,this.curAdvertiserPage+1)},subSend:function(e){var t=this;this.$refs[e].validate((function(a){a&&t.axiosSend(t.mediaId.join(",")).then((function(a){200===a.data.code&&(t.$message({message:"推送成功",type:"success"}),t.$emit("success"),t.$refs[e].resetFields(),t.closeDialog())}))["catch"]((function(e){console.warn(e)}))}))},axiosSend:function(e){return this.$http.post("/media/file/file-upload",{advertiser_ids:this.addForm.pid.join(","),order_id:0,channel:this.addForm.channel,resource_ids:e})},closeDialogHandler:function(){this.$refs.addForm.resetFields(),this.closeDialog()}}},Y=X,Z=Object(b["a"])(Y,J,Q,!1,null,"08d11229",null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("customized-dialog",{attrs:{title:"分享视频",visible:e.dialogVisible,width:600},on:{cancel:e.closeDialog,close:e.closeDialog}},[e.isMultiOp?a("p",[e._v("链接已经全部复制到剪切板，粘贴分享给他人~")]):a("div",{staticClass:"flex"},[a("video",{key:e.url,attrs:{height:"128",width:"128",src:e.url}}),a("div",[a("p",{staticStyle:{"font-size":"16px",color:"#333333",margin:"9px 0 14px 14px"}},[e._v("链接已复制到剪切板，粘贴分享给他人吧！")]),a("p",{staticClass:"text-overflow"},[e._v(e._s(e.url))]),a("div",{staticClass:"copy-link pointer",on:{click:function(t){return e.CopyContent(e.url)}}},[a("svg-icon",{attrs:{"icon-name":"copy1"}}),a("span",[e._v("复制链接")])],1)])])])},ae=[],ie=(a("4bce"),a("093a")),se={name:"VideoShareDialog",mixins:[$["a"]],watch:{dialogVisible:{handler:function(e){if(e){var t=this.materialList.reduce((function(e,t){return e[t.id]=t,e}),{}),a=this.materialId.map((function(e){return t[e].resource_url}));this.CopyContent(a.join("\n"),"","")}}}},props:{materialId:Array,materialList:Array,url:String,isMultiOp:{type:Boolean,default:!1}},methods:{CopyContent:ie["a"]}},le=se,oe=(a("8da3"),Object(b["a"])(le,te,ae,!1,null,"432f02c4",null)),ne=oe.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:e.info.filename,visible:e.dialogVisible,direction:"rtl"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.closeDialog}},[a("div",{staticClass:"video"},[a("video",{key:e.info.resource_url,ref:"videoPlay",staticClass:"video-preview",attrs:{controls:"",src:e.info.resource_url}})]),a("div",{staticClass:"info"},[e._l(e.videoItem,(function(t,i){return a("div",{staticClass:"info-overflow"},[e._v(e._s(t+"："+e.info[i]))])})),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showShare,expression:"showShare"}]},[a("span",[e._v("标签：")]),a("span",[e._v(e._s(e.info.label))]),a("span",{staticClass:"add-label pointer",on:{click:function(){e.$emit("addLabel")}}},[e._v("+添加标签")])])],2)])},ce=[],de={name:"VideoDetailInfo",mixins:[$["a"]],data:function(){return{videoItem:{filename:"视频名称",proportion:"视频尺寸",size:"视频大小",duration:"视频时长",aspect_ratio:"视频比例",create_time:"创建时间",origin_name:"来源",user_name:"上传人",operation_name:"运营",choreographer_name:"编导",montage_name:"剪辑",photography_name:"拍摄",product:"产品",industry:"行业"}}},computed:{showShare:h},watch:{info:{handler:function(e){e.proportion=e.width+"*"+e.height}}},props:{info:{type:Object,default:function(){return{filename:"",resource_url:"",label:""}}}}},ue=de,me=(a("2289"),Object(b["a"])(ue,re,ce,!1,null,"253916ba",null)),he=me.exports,pe=a("7b65"),fe={name:"MaterialLibrary",components:{TextDialog:pe["a"],MessagePushDialog:ee,DeleteMaterialDialog:q,PictureDetailInfo:P,AddLabelDialog:O,VideoShareDialog:ne,VideoDetailInfo:he,MaterialInfoForm:_,MaterialContent:x},mixins:[R],computed:{},props:{isVideo:{type:Boolean,default:!0}},activated:function(){this.materialListLoad(1)},deactivated:function(){this.searchForm=[]},data:function(){return{}},methods:{axiosMaterialList:function(e){return this.$http.get("/media/media/index",{params:{product_id:this.searchForm.product_id,industry_id:this.searchForm.industry_id,user_id:this.searchForm.user_id,creatives:this.searchForm.creatives,origin_id:this.searchForm.origin_id,label_ids:this.searchForm.label_ids,group_id:this.searchForm.all_videoTeam,department_id:this.searchForm.all_videoDepartment,file_name:this.searchForm.file_name,type:this.isVideo?1:2,page:e,page_size:this.pageSize}})}}},ge=fe,be=Object(b["a"])(ge,i,s,!1,null,"7b8223f4",null);t["default"]=be.exports}}]);