(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45866d9e"],{"3c42":function(t,e,i){var a=i("9c15"),o=i("8655"),r=i("24bc"),l=i("51c1"),s=i("6532"),n=i("b072"),c=/MSIE .\./.test(s),u=o.Function,d=function(t){return function(e,i){var a=arguments.length>2,o=a?n(arguments,2):void 0;return t(a?function(){r(l(e)?e:u(e),this,o)}:e,i)}};a({global:!0,bind:!0,forced:c},{setTimeout:d(o.setTimeout),setInterval:d(o.setInterval)})},"4bbd":function(t,e,i){"use strict";e["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(t,e,i){this.currentPage=i,t.call(e,i)},pageSizeChange:function(t,e,i){this.pageSize=i,this.pageChange(t,e,1)}}}},"81c0":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"setting-box flex-1 overflow-hidden flex-vertical"},[a("el-form",{staticClass:"customized-form padding-top",attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("添加产品")])],1),a("el-form-item",{staticClass:"middle-item"},[a("el-input",{attrs:{placeholder:"请输入关键词搜索"},on:{input:function(t){return e.handleSearch(e.productQuery)}},model:{value:e.productQuery,callback:function(t){e.productQuery=t},expression:"productQuery"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1),a("customized-table",{ref:"customizedTable",staticClass:"flex-1 overflow-hidden flex-vertical customized-table",attrs:{loading:e.loading,Data:e.tableData,Header:e.header,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"size-change":function(i){e.pageSizeChange(e.tableLoad,t,i)},"current-change":function(i){e.pageChange(e.tableLoad,t,i)},edit:e.handleEdit,delete:e.handleDelete}}),a("customized-dialog",{staticClass:"customized-dialog",attrs:{title:e.title,width:600,visible:e.visibleProductDialog,showFooter:e.show},on:{close:function(t){return e.resetProductDialog("ruleForm")},submit:function(t){"添加产品"==e.title?e.addSubmit("ruleForm"):e.editSubmit("ruleForm")},cancel:function(t){return e.resetProductDialog("ruleForm")}}},[a("el-form",{ref:"ruleForm",staticClass:"dialog-form",attrs:{"label-width":"80px",model:e.ruleForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-input",{attrs:{maxlength:"20","show-word-limit":"",placeholder:"添加产品"==e.title?"请输入产品名称":""},model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}})],1),a("el-form-item",{attrs:{label:"产品补充"}},[a("el-input",{staticClass:"dialog-textarea",attrs:{placeholder:"添加产品"==e.title?"请填写内容，字数不超过50":"",type:"textarea",maxlength:"50","show-word-limit":""},model:{value:e.productDetail,callback:function(t){e.productDetail=t},expression:"productDetail"}})],1)],1)],1),a("customized-dialog",{attrs:{title:"提示",width:507,visible:e.visibleProductDeleteDialog,showFooter:e.show},on:{close:e.resetProductDeleteDialog,submit:e.deleteSubmit,cancel:e.deleteCancel}},[a("div",{staticClass:"deleteDialog"},[a("p",{staticClass:"content"},[e._v(" 确定删除产品信息吗？ ")])])])],1)},o=[],r=(i("f8c2"),i("22f7"),i("4bbd")),l=[{prop:"id",label:"编号"},{prop:"item",label:"产品名称"},{prop:"convert_cost",label:"操作",showSlot:!0,slotName:"button",childSlots:[{slotName:"edit",buttonName:"编辑"}]}],s=l,n=i("ddfc"),c={name:"ProductionSetting",mixins:[r["a"],n["a"]],created:function(){this.header=s,this.tableLoad()},data:function(){return{id:"",title:"",productQuery:"",productDetail:"",visibleProductDialog:!1,visibleProductDeleteDialog:!1,show:!0,ruleForm:{productName:""},rules:{productName:[{required:!0,message:"请输入产品名称"}]},tableData:[]}},methods:{resetProductData:function(){this.ruleForm.productName="",this.productDetail=""},addProduct:function(){this.title="添加产品",this.visibleProductDialog=!0,this.resetProductData()},handleSearch:function(t){this.axiosTable(),this.throttle(this.tableLoad,this,500)},axiosTable:function(t){return this.$http.get("/order/order-def/index",{params:{search:this.productQuery,type:2,page:t,page_size:this.pageSize}})},tableLoad:function(t){var e=this;this.loading=!0,this.axiosTable(t).then((function(i){i&&200===i.data.code&&(e.total=Number(i.data.data.pagination.total),e.tableData=i.data.data.list,e.currentPage=t)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){e.loading=!1}))},resetProductDialog:function(){this.visibleProductDialog=!1,this.$refs["ruleForm"].resetFields(),this.resetProductData()},handleEdit:function(t){this.title="产品编辑",this.visibleProductDialog=!0,"产品编辑"==this.title&&(this.id=t.id,this.ruleForm.productName=t.item,this.productDetail=t.detail)},addSubmit:function(){var t=this;this.$refs["ruleForm"].validate((function(e){e&&t.$http.post("/order/order-def/create",{type:2,item:t.ruleForm.productName,detail:t.productDetail}).then((function(e){200===e.data.code&&(t.$message({message:"添加成功",type:"success"}),t.resetProductData(),t.$refs["ruleForm"].resetFields(),t.visibleProductDialog=!1,t.tableLoad())}))}))},editSubmit:function(){var t=this;this.$refs["ruleForm"].validate((function(e){e&&t.$http.post("/order/order-def/update",{type:2,id:t.id,item:t.ruleForm.productName,detail:t.productDetail}).then((function(e){200===e.data.code&&(t.$message({message:"编辑成功",type:"success"}),t.tableLoad(),t.visibleProductDialog=!1,t.$refs["ruleForm"].resetFields(),t.resetProductData())}))}))},handleDelete:function(t){this.visibleProductDeleteDialog=!0},resetProductDeleteDialog:function(){this.visibleProductDeleteDialog=!1},deleteSubmit:function(){},deleteCancel:function(){this.visibleProductDeleteDialog=!1}}},u=c,d=(i("a4a5"),i("cba8")),m=Object(d["a"])(u,a,o,!1,null,"3c2fd5e2",null);e["default"]=m.exports},a380:function(t,e,i){},a4a5:function(t,e,i){"use strict";i("a380")},ddfc:function(t,e,i){"use strict";i("3c42"),i("8c17");e["a"]={data:function(){return{timerId:0}},methods:{throttle:function(t,e,i){for(var a=arguments.length,o=new Array(a>3?a-3:0),r=3;r<a;r++)o[r-3]=arguments[r];clearTimeout(e.timerId),i=i||200,e.timerId=setTimeout((function(){t.apply(e,o)}),i)},clearTimer:function(){clearTimeout(this.timerId)}},destroyed:function(){this.clearTimer()}}}}]);