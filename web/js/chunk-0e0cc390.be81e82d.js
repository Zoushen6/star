(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e0cc390"],{"05ce":function(t,e,r){var a=r("6809").PROPER,n=r("2c48"),s=r("cb1f"),o="​᠎";t.exports=function(t){return n((function(){return!!s[t]()||o[t]()!==o||a&&s[t].name!==t}))}},"0e7d":function(t,e,r){"use strict";r("5aae");e["a"]={data:function(){return{export:"",order:null,sort:null,minDate:Math.ceil((new Date-new Date("2018-1-1"))/864e5),shortcutsSetting:["yesterday","lastSeven","lastThirty","lastWeek","lastMonth"]}},mounted:function(){},methods:{sortChangeHandle:function(t){t.order?(this.order=t.prop,this.sort="descending"===t.order?"desc":"asc"):(this.order=null,this.sort=null),this.tableLoad()},downloadReport:function(t){var e=this;this["export"]=t,0===this.tableData.length?this.$message.warning("没有数据可以下载"):this.requestTable().then((function(t){if(200===t.data.code){var r=e.$router.resolve({name:"downloadCenter"}).href;e.$message.success({dangerouslyUseHTMLString:!0,message:'已添加到下载中心，请到<a class="redirect-download" href='.concat(r,">下载中心</a>查看")})}})),this["export"]=""},search:function(){this.tableLoad()}}}},"251f":function(t,e,r){},"47e8":function(t,e,r){"use strict";var a=r("9c15"),n=r("b5db").trim,s=r("05ce");a({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},"4bbd":function(t,e,r){"use strict";e["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(t,e,r){this.currentPage=r,t.call(e,r)},pageSizeChange:function(t,e,r){this.pageSize=r,this.pageChange(t,e,1)}}}},"5aae":function(t,e,r){"use strict";var a=r("9c15"),n=r("5008"),s=r("1c72"),o=r("059d"),l=r("d7ab"),i=r("ffb3"),u=r("2c48"),c=r("430c"),f=r("130a"),d=r("c91b"),p=r("e9db"),m=r("d006"),h=r("8289"),b=[],v=n(b.sort),_=n(b.push),g=u((function(){b.sort(void 0)})),y=u((function(){b.sort(null)})),I=f("sort"),w=!u((function(){if(m)return m<70;if(!(d&&d>3)){if(p)return!0;if(h)return h<603;var t,e,r,a,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)b.push({k:e+a,v:r})}for(b.sort((function(t,e){return e.v-t.v})),a=0;a<b.length;a++)e=b[a].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),F=g||!y||!I||!w,A=function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:i(e)>i(r)?1:-1}};a({target:"Array",proto:!0,forced:F},{sort:function(t){void 0!==t&&s(t);var e=o(this);if(w)return void 0===t?v(e):v(e,t);var r,a,n=[],i=l(e);for(a=0;a<i;a++)a in e&&_(n,e[a]);c(n,A(t)),r=n.length,a=0;while(a<r)e[a]=n[a++];while(a<i)delete e[a++];return e}})},6860:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("c510"),r("f8c2"),r("6010"),r("e15d"),r("e4de"),r("d64c"),r("98ff");var a=r("a01c");function n(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(t,e):void 0}}},7980:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("828e");var a=r("a01c");function n(t){if(Array.isArray(t))return Object(a["a"])(t)}r("74c4"),r("1f83"),r("f8c2"),r("2da9"),r("e4de"),r("b00a"),r("e15d");function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=r("6860");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return n(t)||s(t)||Object(o["a"])(t)||l()}},"7eeb":function(t,e,r){"use strict";r.d(e,"f",(function(){return s})),r.d(e,"c",(function(){return o})),r.d(e,"g",(function(){return l})),r.d(e,"b",(function(){return i})),r.d(e,"e",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"d",(function(){return f}));var a=r("7980"),n=(r("1ae6"),r("f904")),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Date,a=new Date,n=e+t-1;return r.setTime(r.getTime()-864e5*n),a.setTime(a.getTime()-864e5*e),[r,a]},o=function(){var t=new Date,e=new Date,r=t.getDay()>0?t.getDay()-1:6;return e.setTime(e.getTime()-864e5*r),[e,t]},l=function(){var t=new Date,e=new Date,r=t.getDay();return e.setTime(e.getTime()-864e5*(r+6)),t.setTime(t.getTime()-864e5*r),[e,t]},i=function(){var t=new Date,e=new Date,r=t.getDate()-1;return e.setTime(e.getTime()-864e5*r),[e,t]},u=function(){var t=new Date,e=t.getDate(),r=t.getFullYear()-(t.getMonth()>0?0:1),a=(t.getMonth()+11)%12,n=new Date(r,a,1);return t.setTime(t.getTime()-864e5*e),[n,t]},c={yesterday:{label:"昨日消耗",legend:"前日环比",handler:s,params:[1,1]},lastSeven:{label:"近七日消耗",legend:"上一周期环比",handler:s,params:[7,1]},thisWeek:{label:"本周消耗",legend:"上一周环比",handler:o},thisMonth:{label:"本月消耗",legend:"上月环比",handler:i}},f=function(t){var e=c[t],r=e.params?e.params:[],s=e.handler.apply(e,Object(a["a"])(r));return s=s.map((function(t){return n["a"].getNewDay(t)})),s}},8289:function(t,e,r){var a=r("6532"),n=a.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},"828e":function(t,e,r){var a=r("9c15"),n=r("81c6");a({target:"Array",stat:!0},{isArray:n})},"8a8e":function(t,e,r){"use strict";r("251f")},"9cae":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"flex-vertical flex-1 m-l-r-16"},[a("el-form",{ref:"transferForm",staticClass:"customized-form padding-top background-white p-l-r-24",attrs:{inline:!0,model:e.transferForm}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"inline-block form-item-title"},[e._v("基础筛选")]),a("div",{staticClass:"flex-1"},[a("el-form-item",{attrs:{prop:"dateValue"}},[a("customized-time-picker",{staticClass:"time-picker long-item",attrs:{date:e.transferForm.dateValue,shortcutsSetting:e.shortcutsSetting,"max-date":1,"min-date":e.minDate},on:{"update:date":function(t){return e.$set(e.transferForm,"dateValue",t)}}})],1),a("el-form-item",{staticClass:"search-content",attrs:{prop:"transferInputValue",required:!1}},[a("el-input",{staticClass:"long-item input-with-select",attrs:{placeholder:"adv"===e.transferForm.transferSelectValue?"请输入账户名称或ID":"请输入代理商账户名称或ID"},model:{value:e.transferForm.transferInputValue,callback:function(t){e.$set(e.transferForm,"transferInputValue",t)},expression:"transferForm.transferInputValue"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"选择类型",clearable:""},slot:"prepend",model:{value:e.transferForm.transferSelectValue,callback:function(t){e.$set(e.transferForm,"transferSelectValue",t)},expression:"transferForm.transferSelectValue"}},e._l(e.transferSelectType,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1)],1),a("el-form-item",{attrs:{prop:"transferAccount"}},[a("el-select",{attrs:{placeholder:"转账类型",clearable:""},model:{value:e.transferForm.transferAccount,callback:function(t){e.$set(e.transferForm,"transferAccount",t)},expression:"transferForm.transferAccount"}},e._l(e.transferAccountType,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"operateName"}},[a("el-input",{attrs:{placeholder:"请输入操作人姓名"},model:{value:e.transferForm.operateName,callback:function(t){e.$set(e.transferForm,"operateName",t)},expression:"transferForm.operateName"}})],1),a("el-form-item",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.search("addOptions")}}},[e._v("查询")]),a("el-button",{staticClass:"reset",on:{click:e.reset}},[e._v("重置")])],1)],1)]),a("span",{staticClass:"inline-block form-item-title middle-title"},[e._v("细分筛选：")]),a("div",{staticClass:"flex"},[a("span",{staticClass:"inline-block form-item-title"},[e._v("转入方筛选")]),a("el-form-item",{staticClass:"middle-item search-content",attrs:{prop:"transferInInputValue"}},[a("el-input",{staticClass:"long-item input-with-select",attrs:{placeholder:"transfer_in_adv_id"===e.transferForm.transferInAccountValue?"请输入账户名称或ID":"请输入代理商账户名称或ID"},model:{value:e.transferForm.transferInInputValue,callback:function(t){e.$set(e.transferForm,"transferInInputValue",t)},expression:"transferForm.transferInInputValue"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"选择类型",clearable:""},slot:"prepend",model:{value:e.transferForm.transferInAccountValue,callback:function(t){e.$set(e.transferForm,"transferInAccountValue",t)},expression:"transferForm.transferInAccountValue"}},e._l(e.transferInAccount,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1)],1),a("el-form-item",{staticClass:"middle-item",attrs:{prop:"transferInType"}},[a("el-select",{attrs:{placeholder:"账户类型",clearable:""},model:{value:e.transferForm.transferInType,callback:function(t){e.$set(e.transferForm,"transferInType",t)},expression:"transferForm.transferInType"}},e._l(e.InAccountType,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1)],1),a("div",{staticClass:"flex"},[a("span",{staticClass:"inline-block form-item-title"},[e._v("转出方筛选")]),a("el-form-item",{staticClass:"middle-item search-content",attrs:{prop:"transferOutInputValue"}},[a("el-input",{staticClass:"long-item input-with-select",attrs:{placeholder:"transfer_out_adv_id"===e.transferForm.transferOutAccountValue?"请输入账户名称或ID":"请输入代理商账户名称或ID"},model:{value:e.transferForm.transferOutInputValue,callback:function(t){e.$set(e.transferForm,"transferOutInputValue",t)},expression:"transferForm.transferOutInputValue"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"选择类型",clearable:""},slot:"prepend",model:{value:e.transferForm.transferOutAccountValue,callback:function(t){e.$set(e.transferForm,"transferOutAccountValue",t)},expression:"transferForm.transferOutAccountValue"}},e._l(e.transferOutAccount,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1)],1),a("el-form-item",{staticClass:"middle-item",attrs:{prop:"transferOutType"}},[a("el-select",{attrs:{placeholder:"账户类型",clearable:""},model:{value:e.transferForm.transferOutType,callback:function(t){e.$set(e.transferForm,"transferOutType",t)},expression:"transferForm.transferOutType"}},e._l(e.OutAccountType,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})})),1)],1)],1)]),a("div",{staticClass:"background-white m-t-b-20 flex-1 flex-vertical table-box"},[a("div",{staticClass:"report-title p-l-r-24 m-t-b-16"},[a("span",{staticClass:"inline-block m-r-25"},[e._v("总加款金额："+e._s(e.addAmount?e.addAmount:0)+" 元")]),a("span",[e._v("总退款金额："+e._s(e.amount?e.amount:0)+" 元")]),a("div",{staticClass:"inline-block f-r"},[a("span",{staticClass:"iconfont icon-prompt m-r-25 pointer amount",attrs:{title:"最新产出数据为截至"+e.date+"日的转账流水数据"}}),a("el-button",{staticClass:"customized-button",on:{click:function(t){return e.downloadReport(1)}}},[a("span",{staticClass:"iconfont icon-download"}),e._v("下载报表")])],1)]),a("customized-table",{ref:"customizedTable",staticClass:"flex-1 customized-table has-border mini-table p-l-r-24",attrs:{"scroll-in-table":!1,Header:e.header,loading:e.loading,Data:e.tableData,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"size-change":function(r){e.pageSizeChange(e.tableLoad,t,r)},"current-change":function(r){e.pageChange(e.tableLoad,t,r)},"sort-change":e.sortChangeHandle}})],1)],1)},n=[],s=r("d696"),o=(r("5aae"),r("47e8"),r("f8c2"),r("22f7"),r("7eeb")),l=r("a1c0"),i=r("4bbd"),u=[{prop:"stat_datetime",label:"业务发生时间",fixed:!0,width:"160",sortable:"descending"},{prop:"transfer_out_adv_id",label:"转出方账户ID",width:"200"},{prop:"transfer_out_adv_name",label:"转出方账户名称",width:"200"},{prop:"transfer_out_adv_type",label:"转出方账户类型",width:"160"},{prop:"transfer_out_adv1_id",label:"转出方一代账户ID",width:"160"},{prop:"transfer_out_adv1_name",label:"转出方一代账户名称",width:"200"},{prop:"transfer_out_cus_id",label:"转出方客户ID",width:"200"},{prop:"transfer_out_cus_name",label:"转出方客户名称",width:"180"},{prop:"transfer_in_adv_id",label:"转入方账户ID",width:"150"},{prop:"transfer_in_adv_name",label:"转入方账户名称",width:"150"},{prop:"transfer_in_adv_type",label:"转入方账户类型",width:"150"},{prop:"transfer_in_adv1_id",label:"转入方一代账户ID",width:"180"},{prop:"transfer_in_adv1_name",label:"转入方一代账户名称",width:"180"},{prop:"transfer_in_adv_cus_id",label:"转入方客户ID",width:"180"},{prop:"transfer_in_adv_cus_name",label:"转入方客户名称",width:"120"},{prop:"transfer_type",label:"转账类型",width:"80"},{prop:"transfer_un_grants",label:"转账非赠款",width:"150",sortable:"descending"},{prop:"transfer_grants",label:"转账赠款",width:"150",sortable:"descending"},{prop:"transfer_balance",label:"转账总金额",width:"150",sortable:"descending"},{prop:"operator",label:"操作人",width:"150"},{prop:"ad_platform",label:"平台类型",width:"150"}],c=[{id:"adv",value:"账户名称或ID"},{id:"agent",value:"代理商账户名称或ID"}],f=[{id:"transfer_in_adv_id",value:"账户名称或ID"},{id:"transfer_in_agent_id",value:"代理商账户名称或ID"}],d=[{id:"transfer_out_adv_id",value:"账户名称或ID"},{id:"transfer_out_agent_id",value:"代理商账户名称或ID"}],p=[{value:"加款"},{value:"退款"}],m=[{value:"广告代理商"},{value:"广告主"},{value:"虚拟广告主"}],h=[{value:"广告代理商"},{value:"广告主"},{value:"虚拟广告主"}],b=r("0e7d"),v={name:"TransferStreamReport",components:{CustomizedTable:l["default"]},mixins:[i["a"],b["a"]],created:function(){this.header=u},activated:function(){this.tableLoad()},data:function(){return{date:"",addAmount:"",amount:"",transferInAccount:f,transferOutAccount:d,transferSelectType:c,transferAccountType:p,InAccountType:m,OutAccountType:h,transferForm:{dateValue:Object(o["f"])(1,1),transferInputValue:"",transferSelectValue:"adv",transferAccount:"",operateName:"",transferInInputValue:"",transferInAccountValue:"transfer_in_adv_id",transferInType:"",transferOutInputValue:"",transferOutAccountValue:"transfer_out_adv_id",transferOutType:""}}},methods:{requestTable:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.$http.get("/report/transfer/index",{params:(t={order:this.order,sort:this.sort,start_date:this.$common.getNewDay(this.transferForm.dateValue[0]),end_date:this.$common.getNewDay(this.transferForm.dateValue[1])},Object(s["a"])(t,this.transferForm.transferSelectValue,this.transferForm.transferInputValue.trim()),Object(s["a"])(t,"transfer_type",this.transferForm.transferAccount),Object(s["a"])(t,"operator",this.transferForm.operateName),Object(s["a"])(t,this.transferForm.transferOutAccountValue,this.transferForm.transferOutInputValue.trim()),Object(s["a"])(t,"transfer_out_adv_type",this.transferForm.transferOutType),Object(s["a"])(t,this.transferForm.transferInAccountValue,this.transferForm.transferInInputValue.trim()),Object(s["a"])(t,"transfer_in_adv_type",this.transferForm.transferInType),Object(s["a"])(t,"is_export",this["export"]),Object(s["a"])(t,"page",e),Object(s["a"])(t,"page_size",this.pageSize),t)})},tableLoad:function(t){var e=this;this.loading=!0,this.addAmount="",this.amount="",this.requestTable(t).then((function(r){200===r.data.code&&(e.date=r.data.data.date,e.tableData=r.data.data.list,e.addAmount=r.data.data.total.transfer_income,e.amount=r.data.data.total.transfer_refund,e.total=Number(r.data.data.pagination.total),e.currentPage=t)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){e.loading=!1}))},reset:function(){this.transferForm.transferSelectValue="adv",this.transferForm.transferInAccountValue="transfer_in_adv_id",this.transferForm.transferOutAccountValue="transfer_out_adv_id",this.$refs.transferForm.resetFields()}}},_=v,g=(r("8a8e"),r("cba8")),y=Object(g["a"])(_,a,n,!1,null,"68f18d95",null);e["default"]=y.exports},a01c:function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,"a",(function(){return a}))},c91b:function(t,e,r){var a=r("6532"),n=a.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},e15d:function(t,e,r){var a=r("9c15"),n=r("7c9d"),s=r("774a"),o=!s((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:n})},e9db:function(t,e,r){var a=r("6532");t.exports=/MSIE|Trident/.test(a)}}]);