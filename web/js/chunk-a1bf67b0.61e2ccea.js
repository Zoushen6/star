(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1bf67b0"],{"4bbd":function(e,t,a){"use strict";t["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(e,t,a){this.currentPage=a,e.call(t,a)},pageSizeChange:function(e,t,a){this.pageSize=a,this.pageChange(e,t,1)}}}},6860:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("c510"),a("f8c2"),a("6010"),a("e15d"),a("e4de"),a("d64c"),a("98ff");var r=a("a01c");function i(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},7980:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("828e");var r=a("a01c");function i(e){if(Array.isArray(e))return Object(r["a"])(e)}a("74c4"),a("1f83"),a("f8c2"),a("2da9"),a("e4de"),a("b00a"),a("e15d");function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("6860");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return i(e)||n(e)||Object(o["a"])(e)||s()}},"7eeb":function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"d",(function(){return d}));var r=a("7980"),i=(a("1ae6"),a("f904")),n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date,r=new Date,i=t+e-1;return a.setTime(a.getTime()-864e5*i),r.setTime(r.getTime()-864e5*t),[a,r]},o=function(){var e=new Date,t=new Date,a=e.getDay()>0?e.getDay()-1:6;return t.setTime(t.getTime()-864e5*a),[t,e]},s=function(){var e=new Date,t=new Date,a=e.getDay();return t.setTime(t.getTime()-864e5*(a+6)),e.setTime(e.getTime()-864e5*a),[t,e]},l=function(){var e=new Date,t=new Date,a=e.getDate()-1;return t.setTime(t.getTime()-864e5*a),[t,e]},c=function(){var e=new Date,t=e.getDate(),a=e.getFullYear()-(e.getMonth()>0?0:1),r=(e.getMonth()+11)%12,i=new Date(a,r,1);return e.setTime(e.getTime()-864e5*t),[i,e]},u={yesterday:{label:"昨日消耗",legend:"前日环比",handler:n,params:[1,1]},lastSeven:{label:"近七日消耗",legend:"上一周期环比",handler:n,params:[7,1]},thisWeek:{label:"本周消耗",legend:"上一周环比",handler:o},thisMonth:{label:"本月消耗",legend:"上月环比",handler:l}},d=function(e){var t=u[e],a=t.params?t.params:[],n=t.handler.apply(t,Object(r["a"])(a));return n=n.map((function(e){return i["a"].getNewDay(e)})),n}},"828e":function(e,t,a){var r=a("9c15"),i=a("81c6");r({target:"Array",stat:!0},{isArray:i})},"8a61":function(e,t,a){"use strict";t["a"]={data:function(){return{shortcutsSettings:["today","yesterday","lastSeven","lastThirty","curWeek","lastWeek","curMonth","lastMonth"],shortcutsSetting:["today","yesterday","lastSeven","lastThirty","lastNinety","curWeek","lastWeek","curMonth","lastMonth"],statisticsTime:[(new Date).getTime()-6048e5,(new Date).getTime()]}}}},"98b6a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"setting-box flex-1 overflow-hidden flex-vertical"},[r("el-form",{ref:"searchForm",staticClass:"customized-form padding-top",attrs:{model:t.searchForm,inline:!0}},[r("el-form-item",{attrs:{prop:"log_time"}},[r("customized-time-picker",{staticClass:"date-range-without-close-icon time-picker long-item",attrs:{date:t.searchForm.value,shortcutsSetting:t.shortcutsSetting,"max-date":0},on:{"update:date":function(e){return t.$set(t.searchForm,"value",e)}}})],1),r("el-form-item",{attrs:{prop:"all_videoDepartment"}},[r("el-select",{staticClass:"middle-item",attrs:{placeholder:"选择部门",clearable:""},on:{change:t.getDepartment},model:{value:t.searchForm.all_videoDepartment,callback:function(e){t.$set(t.searchForm,"all_videoDepartment",e)},expression:"searchForm.all_videoDepartment"}},t._l(t.departmentType,(function(e,t){return r("el-option",{key:t,attrs:{label:e.department_name,value:e.department_id}})})),1)],1),r("el-form-item",{attrs:{prop:"all_videoTeam"}},[r("el-select",{staticClass:"middle-item",attrs:{placeholder:"选择团队",clearable:""},model:{value:t.searchForm.all_videoTeam,callback:function(e){t.$set(t.searchForm,"all_videoTeam",e)},expression:"searchForm.all_videoTeam"}},t._l(t.groupType,(function(e,t){return r("el-option",{key:t,attrs:{label:e.group_name,value:e.group_id}})})),1)],1),r("el-form-item",{attrs:{prop:"dimension"}},[r("el-select",{staticClass:"middle-item",attrs:{placeholder:"选择角色维度",clearable:""},model:{value:t.searchForm.dimension,callback:function(e){t.$set(t.searchForm,"dimension",e)},expression:"searchForm.dimension"}},t._l(t.dimensionList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.role_name,value:e.role_id}})})),1)],1),r("el-form-item",{attrs:{prop:"user_id"}},[r("el-select",{staticClass:"middle-item",attrs:{placeholder:"选择用户名称",clearable:""},model:{value:t.searchForm.user_id,callback:function(e){t.$set(t.searchForm,"user_id",e)},expression:"searchForm.user_id"}},t._l(t.userList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.user_name,value:e.user_id}})})),1)],1),r("el-form-item",{attrs:{prop:"role"}},[r("el-select",{staticClass:"long-item",attrs:{placeholder:"选择用户角色",clearable:""},model:{value:t.searchForm.role,callback:function(e){t.$set(t.searchForm,"role",e)},expression:"searchForm.role"}},t._l(t.userRoleList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.role_name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{prop:"result"}},[r("el-select",{staticClass:"long-item",attrs:{placeholder:"选择操作结果",clearable:""},model:{value:t.searchForm.result,callback:function(e){t.$set(t.searchForm,"result",e)},expression:"searchForm.result"}},t._l(t.opResultList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{prop:"operate_content"}},[r("el-input",{staticClass:"middle-item",attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入操作内容",clearable:""},model:{value:t.searchForm.operate_content,callback:function(e){t.$set(t.searchForm,"operate_content",e)},expression:"searchForm.operate_content"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.searchFn}},[t._v("查询")])],1),r("el-form-item",[r("el-button",{on:{click:function(e){return t.resetForm("searchForm")}}},[t._v("重置")])],1),r("el-form-item",[r("el-button",{staticClass:"blue-button",attrs:{type:"primary"},on:{click:t.downloadReport}},[t._v("下载日志报表")])],1)],1),r("customized-table",{ref:"customizedTable",staticClass:"flex-1 overflow-hidden flex-vertical customized-table",attrs:{loading:t.loading,Data:t.logList,Header:t.header,total:t.total,"row-style":{height:"80px"},"page-size":t.pageSize,"current-page":t.currentPage},on:{"size-change":function(a){t.pageSizeChange(t.tableLoad,e,a)},"current-change":function(a){t.pageChange(t.tableLoad,e,a)}},scopedSlots:t._u([{key:"opResult",fn:function(e){var t=e.row;return[r("svg-icon",{attrs:{"icon-name":t.status?"opsuccess":"opfail"}})]}}])})],1)},i=[],n=(a("f8c2"),a("22f7"),a("4bbd")),o=[{prop:"result",label:"操作结果",showSlot:!0,align:"center",slotName:"opResult"},{prop:"create_time",label:"操作时间"},{prop:"department_name",showTooltip:!0,className:"height-limit",label:"操作部门"},{prop:"group_name",showTooltip:!0,className:"height-limit",label:"操作团队"},{prop:"username",showTooltip:!0,className:"height-limit",label:"用户名称"},{prop:"role_name",label:"用户角色"},{prop:"title",label:"操作内容"}],s=o,l=a("d360"),c=a("8a61"),u=a("7eeb"),d={name:"OperateLog",mixins:[n["a"],l["a"],c["a"]],created:function(){this.header=s},mounted:function(){this.tableLoad(1),this.getThreeList()},data:function(){return{logList:[],searchForm:{value:Object(u["f"])(7,0),all_videoDepartment:"",all_videoTeam:"",dimension:"",user_id:"",role:"",result:"",operate_content:""},opResultList:[{label:"操作成功",value:1},{label:"操作失败",value:0}],dimensionList:[],userList:[],userRoleList:[]}},methods:{axiosTable:function(e){return this.$http.get("tool/log/index",{params:{stat_start_time:0!==this.searchForm.value.length?this.$common.getNewDay(this.searchForm.value[0]):"",stat_end_time:0!==this.searchForm.value.length?this.$common.getNewDay(this.searchForm.value[1]):"",group_id:this.searchForm.all_videoTeam,department_id:this.searchForm.all_videoDepartment,role_id:this.searchForm.dimension,user_id:this.searchForm.user_id,user_role_id:this.searchForm.role,status:this.searchForm.result,title:this.searchForm.operate_content,page:e,page_size:this.pageSize}})},tableLoad:function(e){var t=this;this.loading=!0,this.axiosTable(e).then((function(a){a&&200===a.data.code&&(t.total=Number(a.data.data.pagination.total),t.logList=a.data.data.list,t.currentPage=e)}))["catch"]((function(e){console.warn(e)}))["finally"]((function(){t.loading=!1}))},getDepartment:function(e){},searchFn:function(){this.tableLoad(1)},resetForm:function(e){var t=this;this.$nextTick((function(){t.$refs[e].resetFields(),t.searchForm.value=Object(u["f"])(7,0)}))},downloadReport:function(){var e=this;this.$http.get("/tool/log/index",{params:{stat_start_time:0!=this.searchForm.value.length?this.$common.getNewDay(this.searchForm.value[0]):"",stat_end_time:0!=this.searchForm.value.length?this.$common.getNewDay(this.searchForm.value[1]):"",group_id:this.searchForm.all_videoTeam,department_id:this.searchForm.all_videoDepartment,role_id:this.searchForm.dimension,user_id:this.searchForm.user_id,user_role_id:this.searchForm.role,status:this.searchForm.result,title:this.searchForm.operate_content,is_export:1},responseType:"blob"}).then((function(t){e.$common.downloadFileBlob(t)}))},getThreeList:function(){var e=this;this.getDimensionist().then((function(t){e.dimensionList=t.data.data})),this.getUserList().then((function(t){e.userList=t.data.data})),this.getUseraRoleList().then((function(t){e.userRoleList=t.data.data}))},getDimensionist:function(){return this.$http.get("tool/log/role-dimension-list")},getUserList:function(){return this.$http.get("tool/log/user-list")},getUseraRoleList:function(){return this.$http.get("tool/log/user-role-list")}}},m=d,h=(a("fb74"),a("cba8")),p=Object(h["a"])(m,r,i,!1,null,"be25b678",null);t["default"]=p.exports},a01c:function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},b63e:function(e,t,a){},d360:function(e,t,a){"use strict";t["a"]={data:function(){return{channels:[{item:"头条数据",id:1},{item:"快手数据",id:2}],materialType:[],mediaType:[],orderType:[],operation:[],optimizer:[],material_optimizer:[],optimizerGroup:[],productNameType:[],isHidden:[{label:"已隐藏",value:"1"},{label:"未隐藏",value:"0"}],productIndustry:[],groupType:[],demandType:[],productLineOptions:[{label:"华为",value:"华为"},{label:"小米",value:"小米"}],departmentType:[],needRuleForm:{group_id:""},memberList:[],origins:[{label:"订单",value:0},{label:"本地",value:1}],labelList:[]}},mounted:function(){this.handleProductID(),this.handleGroupID(),this.handleDepartment(),this.handleOperation(),this.handleOptimizer(),this.handleOptimizerGroup(),this.handleMemberList(),this.handleLabelList(),this.handleMaterialOptimizer()},methods:{handleLabelList:function(){var e=this;return this.$http.get("/media/media/label-list",{params:{}}).then((function(t){t&&(e.labelList=t.data.data)}))},handleProductID:function(){var e=this;this.$http.get("/order/order-dictionary",{params:{order:"id",sort:"asc"}}).then((function(t){200===t.data.code&&(e.materialType=t.data.data.material_type,e.mediaType=t.data.data.media,e.orderType=t.data.data.order_type,e.productNameType=t.data.data.product_name,e.productIndustry=t.data.data.product_industry,e.demandType=t.data.data.demand_type)}))},handleOperation:function(){var e=this;this.$http.get("/role/operation-list").then((function(t){200===t.data.code&&(e.operation=t.data.data)}))},handleOptimizer:function(){var e=this;this.$http.get("/role/optimizer-list").then((function(t){200===t.data.code&&(e.optimizer=t.data.data)}))},handleMaterialOptimizer:function(){var e=this;this.$http.get("/role/uploader-list").then((function(t){200===t.data.code&&(e.material_optimizer=t.data.data)}))},handleOptimizerGroup:function(){var e=this;this.$http.get("/role/optimizer-group-list").then((function(t){200===t.data.code&&(e.optimizerGroup=t.data.data.list.options)}))},handleGroupID:function(){var e=this;this.$http.get("/group/list",{params:{order:"create_time",sort:"desc",page_size:100}}).then((function(t){200===t.data.code&&(e.groupType=t.data.data.list)}))},handleDepartment:function(){var e=this;this.$http.get("/department/list").then((function(t){200===t.data.code&&(e.departmentType=t.data.data)}))},handleMemberList:function(){var e=this;this.$http.get("/role/list").then((function(t){200===t.data.code&&(e.memberList=t.data.data)}))}}}},e15d:function(e,t,a){var r=a("9c15"),i=a("7c9d"),n=a("774a"),o=!n((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:i})},fb74:function(e,t,a){"use strict";a("b63e")}}]);