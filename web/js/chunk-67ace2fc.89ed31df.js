(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67ace2fc"],{"0e7d":function(t,e,a){"use strict";a("5aae");e["a"]={data:function(){return{export:"",order:null,sort:null,minDate:Math.ceil((new Date-new Date("2018-1-1"))/864e5),shortcutsSetting:["yesterday","lastSeven","lastThirty","lastWeek","lastMonth"]}},mounted:function(){},methods:{sortChangeHandle:function(t){t.order?(this.order=t.prop,this.sort="descending"===t.order?"desc":"asc"):(this.order=null,this.sort=null),this.tableLoad()},downloadReport:function(t){var e=this;this["export"]=t,0===this.tableData.length?this.$message.warning("没有数据可以下载"):this.requestTable().then((function(t){if(200===t.data.code){var a=e.$router.resolve({name:"downloadCenter"}).href;e.$message.success({dangerouslyUseHTMLString:!0,message:'已添加到下载中心，请到<a class="redirect-download" href='.concat(a,">下载中心</a>查看")})}})),this["export"]=""},search:function(){this.tableLoad()}}}},"4bbd":function(t,e,a){"use strict";e["a"]={data:function(){return{pageSize:10,total:0,currentPage:1,header:null,tableData:[],loading:!1}},mounted:function(){},methods:{pageChange:function(t,e,a){this.currentPage=a,t.call(e,a)},pageSizeChange:function(t,e,a){this.pageSize=a,this.pageChange(t,e,1)}}}},"4cc9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"flex-vertical flex-1 m-l-r-16"},[r("el-form",{ref:"starMapReportForm",staticClass:"customized-form padding-top background-white p-l-r-24",attrs:{inline:!0,model:e.starMapReportForm}},[r("div",{staticClass:"flex"},[r("span",{staticClass:"inline-block form-item-title"},[e._v("基础筛选")]),r("div",{staticClass:"flex-1"},[r("el-form-item",{attrs:{prop:"dateValue"}},[r("customized-time-picker",{staticClass:"time-picker long-item",attrs:{date:e.starMapReportForm.dateValue,shortcutsSetting:e.shortcutsSetting,"max-date":0,"min-date":e.minDate},on:{"update:date":function(t){return e.$set(e.starMapReportForm,"dateValue",t)}}})],1),r("el-form-item",{staticClass:"long-item",attrs:{prop:"agent"}},[r("el-select",{attrs:{placeholder:"全部代理商账户",clearable:""},model:{value:e.starMapReportForm.agent,callback:function(t){e.$set(e.starMapReportForm,"agent",t)},expression:"starMapReportForm.agent"}},e._l(e.starMapReportForm.agentList,(function(t){return r("el-option",{key:t.agent_id,attrs:{label:t.agent_name,value:t.agent_name}})})),1)],1),r("el-form-item",{staticClass:"long-item",attrs:{prop:"startMapAccount"}},[r("el-select",{attrs:{placeholder:"全部星图账户",clearable:""},model:{value:e.starMapReportForm.startMapAccount,callback:function(t){e.$set(e.starMapReportForm,"startMapAccount",t)},expression:"starMapReportForm.startMapAccount"}},e._l(e.starMapReportForm.startMapAccountList,(function(t){return r("el-option",{key:t.star_id,attrs:{label:t.star_name,value:t.star_id}})})),1)],1),r("el-form-item",{staticClass:"long-item",attrs:{prop:"operationType"}},[r("el-select",{attrs:{placeholder:"操作类型",clearable:""},model:{value:e.starMapReportForm.operationType,callback:function(t){e.$set(e.starMapReportForm,"operationType",t)},expression:"starMapReportForm.operationType"}},e._l(e.starMapReportForm.operationTypeList,(function(t,e){return r("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),r("el-form-item",{staticClass:"f-r search-btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),r("el-button",{staticClass:"reset",on:{click:e.reset}},[e._v("重置")])],1)],1)])]),r("div",{staticClass:"background-white m-t-b-20 flex-1 flex-vertical table-box"},[r("div",{staticClass:"report-title p-l-r-24 m-t-b-16"},[r("div",{staticClass:"inline-block f-r"},[r("el-button",{staticClass:"customized-button",on:{click:function(t){return e.downloadReport(1)}}},[r("span",{staticClass:"iconfont icon-download"}),e._v("下载报表 ")])],1)]),r("customized-table",{ref:"customizedTable",staticClass:"flex-1 customized-table has-border mini-table p-l-r-24",attrs:{"scroll-in-table":!1,Header:e.header,loading:e.loading,Data:e.tableData,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"size-change":function(a){e.pageSizeChange(e.tableLoad,t,a)},"current-change":function(a){e.pageChange(e.tableLoad,t,a)},"sort-change":e.sortChangeHandle}})],1)],1)},n=[],o=(a("5aae"),a("f8c2"),a("22f7"),a("f904")),i=a("7eeb"),s=a("a1c0"),c=a("4bbd"),l=(a("c510"),function(t){return t.stat_datetime.slice(0,10)}),u=[{prop:"stat_datetime",label:"统计时间",minWidth:"100",sortable:"descending",formatter:l},{prop:"star_id",label:"星图账户ID",minWidth:"160"},{prop:"star_name",label:"星图账户名称",minWidth:"220"},{prop:"consumer_name",label:"广告主客户",minWidth:"200"},{prop:"first_industry",label:"客户一级行业",minWidth:"150"},{prop:"second_industry",label:"客户二级行业",minWidth:"150"},{prop:"task_type",label:"任务类型",minWidth:"120"},{prop:"type",label:"操作类型",minWidth:"120"},{prop:"status",label:"任务状态",minWidth:"120"},{prop:"stat_datetime",label:"操作时间",minWidth:"150",sortable:"descending"},{prop:"balance",label:"金钱",minWidth:"120",sortable:"descending"}],d=a("0e7d"),p={name:"StarMapReport",components:{CustomizedTable:s["default"]},mixins:[c["a"],d["a"]],created:function(){this.header=u},activated:function(){this.getAgentAccount(),this.getStarMapAccount(),this.tableLoad()},deactivated:function(){this.reset()},data:function(){return{shortcutsSetting:["yesterday","lastSeven","lastThirty","lastWeek","lastMonth"],starMapReportForm:{dateValue:Object(i["f"])(93,0),agent:"",agentList:[],startMapAccount:"",startMapAccountList:[{value:"星图网络"}],operationType:"",operationTypeList:["扣款金额","冻结金额","解冻金额"]}}},methods:{getAgentAccount:function(){var t=this;this.$http.get("/report/star/agent-list").then((function(e){200===e.data.code&&(t.starMapReportForm.agentList=e.data.data.list)}))},getStarMapAccount:function(){var t=this;this.$http.get("/report/star/account-list").then((function(e){200===e.data.code&&(t.starMapReportForm.startMapAccountList=e.data.data.list)}))},requestTable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.$http.get("/report/star/index",{params:{start_date:o["a"].getNewDay(this.starMapReportForm.dateValue[0]),end_date:o["a"].getNewDay(this.starMapReportForm.dateValue[1]),star_id:this.starMapReportForm.startMapAccount,agent:this.starMapReportForm.agent,type:this.starMapReportForm.operationType,order:this.order,sort:this.sort,is_export:this["export"],page:t,page_size:this.pageSize}})},tableLoad:function(t){var e=this;this.loading=!0,this.requestTable(t).then((function(a){200===a.data.code&&(e.date=a.data.data.date,e.tableData=a.data.data.list,e.total=Number(a.data.data.pagination.total),e.currentPage=t)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){e.loading=!1}))},search:function(){this.tableLoad()},reset:function(){this.$refs.starMapReportForm.resetFields()}}},f=p,m=(a("fef0"),a("cba8")),h=Object(m["a"])(f,r,n,!1,null,"7762dbe8",null);e["default"]=h.exports},"5aae":function(t,e,a){"use strict";var r=a("9c15"),n=a("5008"),o=a("1c72"),i=a("059d"),s=a("d7ab"),c=a("ffb3"),l=a("2c48"),u=a("430c"),d=a("130a"),p=a("c91b"),f=a("e9db"),m=a("d006"),h=a("8289"),g=[],b=n(g.sort),v=n(g.push),y=l((function(){g.sort(void 0)})),M=l((function(){g.sort(null)})),w=d("sort"),T=!l((function(){if(m)return m<70;if(!(p&&p>3)){if(f)return!0;if(h)return h<603;var t,e,a,r,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(r=0;r<47;r++)g.push({k:e+r,v:a})}for(g.sort((function(t,e){return e.v-t.v})),r=0;r<g.length;r++)e=g[r].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),A=y||!M||!w||!T,C=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:c(e)>c(a)?1:-1}};r({target:"Array",proto:!0,forced:A},{sort:function(t){void 0!==t&&o(t);var e=i(this);if(T)return void 0===t?b(e):b(e,t);var a,r,n=[],c=s(e);for(r=0;r<c;r++)r in e&&v(n,e[r]);u(n,C(t)),a=n.length,r=0;while(r<a)e[r]=n[r++];while(r<c)delete e[r++];return e}})},6860:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("c510"),a("f8c2"),a("6010"),a("e15d"),a("e4de"),a("d64c"),a("98ff");var r=a("a01c");function n(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(t,e):void 0}}},7980:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));a("828e");var r=a("a01c");function n(t){if(Array.isArray(t))return Object(r["a"])(t)}a("74c4"),a("1f83"),a("f8c2"),a("2da9"),a("e4de"),a("b00a"),a("e15d");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=a("6860");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return n(t)||o(t)||Object(i["a"])(t)||s()}},"7eeb":function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"g",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return u})),a.d(e,"d",(function(){return d}));var r=a("7980"),n=(a("1ae6"),a("f904")),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date,r=new Date,n=e+t-1;return a.setTime(a.getTime()-864e5*n),r.setTime(r.getTime()-864e5*e),[a,r]},i=function(){var t=new Date,e=new Date,a=t.getDay()>0?t.getDay()-1:6;return e.setTime(e.getTime()-864e5*a),[e,t]},s=function(){var t=new Date,e=new Date,a=t.getDay();return e.setTime(e.getTime()-864e5*(a+6)),t.setTime(t.getTime()-864e5*a),[e,t]},c=function(){var t=new Date,e=new Date,a=t.getDate()-1;return e.setTime(e.getTime()-864e5*a),[e,t]},l=function(){var t=new Date,e=t.getDate(),a=t.getFullYear()-(t.getMonth()>0?0:1),r=(t.getMonth()+11)%12,n=new Date(a,r,1);return t.setTime(t.getTime()-864e5*e),[n,t]},u={yesterday:{label:"昨日消耗",legend:"前日环比",handler:o,params:[1,1]},lastSeven:{label:"近七日消耗",legend:"上一周期环比",handler:o,params:[7,1]},thisWeek:{label:"本周消耗",legend:"上一周环比",handler:i},thisMonth:{label:"本月消耗",legend:"上月环比",handler:c}},d=function(t){var e=u[t],a=e.params?e.params:[],o=e.handler.apply(e,Object(r["a"])(a));return o=o.map((function(t){return n["a"].getNewDay(t)})),o}},8289:function(t,e,a){var r=a("6532"),n=r.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},"828e":function(t,e,a){var r=a("9c15"),n=a("81c6");r({target:"Array",stat:!0},{isArray:n})},a01c:function(t,e,a){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}a.d(e,"a",(function(){return r}))},c91b:function(t,e,a){var r=a("6532"),n=r.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},e15d:function(t,e,a){var r=a("9c15"),n=a("7c9d"),o=a("774a"),i=!o((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:i},{from:n})},e9db:function(t,e,a){var r=a("6532");t.exports=/MSIE|Trident/.test(r)},faec:function(t,e,a){},fef0:function(t,e,a){"use strict";a("faec")}}]);