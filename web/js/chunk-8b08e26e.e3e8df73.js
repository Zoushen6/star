(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b08e26e","chunk-c728fac0"],{"05e4":function(t,e,r){},"4d21":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=this,r=e.$createElement,a=e._self._c||r;return a("div",{staticClass:"flex-1 flex-vertical"},[a("info-form",{on:{search:e.searchFn}}),a("customized-table",{ref:"customizedTable",staticClass:"customized-table mini-table flex-1 without-pagination",attrs:{"scroll-in-table":!1,loading:e.loading,Data:e.tableData,Header:e.header,total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,"show-summary":!0,"summary-method":e.getSummary},on:{"sort-change":e.sortChangeHandle,"size-change":function(r){e.pageSizeChange(e.tableLoad,t,r)},"current-change":function(r){e.pageChange(e.tableLoad,t,r)},buttonReceiveOrder:e.buttonReceiveOrder,buttonOrderDetail:e.buttonOrderDetail,buttonHideOrder:e.buttonHideOrder},scopedSlots:e._u([{key:"order_name",fn:function(t){var r=t.row;return[a("el-popover",{attrs:{placement:"top-start",width:"100",trigger:"hover",content:r.order_name,disabled:r.order_name.length<20}},[a("span",{staticClass:"ell-2 pointer",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(r.order_name))])])]}},{key:"operation_id",fn:function(t){var r=t.row;return[a("el-popover",{attrs:{placement:"top-start",width:"100",trigger:"hover",content:r.operation_id,disabled:!0}},[a("span",{staticClass:"ell-2 ",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(r.operation_id))])])]}},{key:"group_id",fn:function(t){var r=t.row;return[a("el-popover",{attrs:{placement:"top-start",width:"100",trigger:"hover",content:r.group_id,disabled:!0}},[a("span",{staticClass:"ell-2 ",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(r.group_id))])])]}},{key:"timeline",fn:function(t){var e=t.row;return[a("el-steps",{attrs:{active:e.process?e.process.length:0,"align-center":""}},[a("el-step",{attrs:{title:"下单",description:e.process&&e.process[0]?e.process[0]:"暂无"}}),a("el-step",{attrs:{title:"接单",description:e.process&&e.process[1]?e.process[1]:"暂无"}}),a("el-step",{attrs:{title:"交付",description:e.process&&e.process[2]?e.process[2]:"暂无"}}),a("el-step",{attrs:{title:"签收",description:e.process&&e.process[3]?e.process[3]:"暂无"}}),a("el-step",{attrs:{title:"投放",description:e.process&&e.process[4]?e.process[4]:"暂无"}})],1)]}}])}),a("div",{staticClass:"acceptOder"},[a("customized-dialog",{attrs:{title:"接单",visible:e.visibleOrderDialog,width:400,"show-footer":!0},on:{cancel:e.resetOrderDialog,submit:e.acceptOder,close:e.resetOrderDialog}},[a("p",{staticStyle:{"text-align":"left"}},[e._v("确定接单吗？")])])],1),a("div",{staticClass:"hidden"},[a("customized-dialog",{attrs:{visible:e.visibleHideDialog,width:400,"show-footer":!0},on:{close:e.resetOrderDialog,submit:e.submitHide,cancel:e.resetOrderDialog}},[a("span",[e._v("确认"+e._s(e.isHidden))])])],1)],1)},i=[],o=r("cc64"),s=(r("f8c2"),r("5aae"),r("c08f"),r("09ed"),r("22f7"),r("4bbd")),n=r("db49"),c=r("07a4"),d=r("0a06"),l=function(t){return"已投放"===t.status?Number(t.cost):""},u=function(t){return"已投放"===t.status?Number(t.creative_num):""},p=function(t){return 0!=t.is_hidden},h=function(t){return 0==t.is_hidden},m=function(t,e){return!!(c["a"].state.global.userTypeRoute&d["IDEA_MEMBER_MASK"])&&0==t.is_team_members},f=function(t,e){return!!(c["a"].state.global.userTypeRoute&d["IDEA_MEMBER_MASK"])&&0==t.is_team_members},b=function(t,e){return!(c["a"].state.global.userOrderAuth&e.mask&&"待接单"===t.status)},_=[{prop:"order_name",label:"订单名称",width:"150",className:"height-limit",fixed:!0,showSlot:!0,slotName:"order_name"},{prop:"media",label:"媒体",width:"120",fixed:!0},{prop:"demand_type",label:"需求类型",width:"100"},{prop:"order_type",label:"视频类型",width:"100"},{prop:"operation_id",label:"提单人",width:"140",showSlot:!0,slotName:"operation_id"},{prop:"group_id",label:"视频团队",width:"150",showSlot:!0,slotName:"group_id"},{prop:"process",label:"流程日期",width:"320",showSlot:!0,slotName:"timeline"},{prop:"end_time",label:"截稿日期",width:"140",sortable:"descending"},{prop:"cost",label:"累计消耗",width:"150",sortable:"descending",formatter:l},{prop:"creative_num",label:"创意数",width:"150",formatter:u},{prop:"status",label:"状态",width:"auto",fixed:"right"},{prop:"convert_cost",label:"操作",width:"155",fixed:"right",showSlot:!0,slotName:"button",childSlots:[{slotName:"buttonReceiveOrder",buttonName:"接单",mask:n["GET_ORDER_AUTH"],disappear:b},{slotName:"buttonOrderDetail",buttonName:"详情",disabled:f},{slotName:"buttonHideOrder",buttonName:"隐藏",disappear:p,disabled:m},{slotName:"buttonHideOrder",buttonName:"取消隐藏",disappear:h,disabled:m}]}],g=r("ba40"),v=r("7736"),y=r("f6db"),D=r("7928"),w={name:"OrderTable",components:{CustomizedClipboard:y["default"],InfoForm:g["a"]},mixins:[s["a"],D["a"]],data:function(){return{searchData:{is_hidden:"0",status:""},isHidden:"",visibleOrderDialog:!1,visibleHideDialog:!1,row:"",status_count:[],summaryData:null,orderRuleForm:{material_type:1,order_name:"",special_requirement:"",prompt:"",reason:""},orderRules:{order_name:[{required:!0,message:"请输入订单名称"}],material_type:[{required:!0,message:"请选择素材类型",trigger:"change"}],reason:[{required:!0,message:"请输入拒单理由"}]},order:null,sort:null}},created:function(){this.header=_,this.$store.commit("setOrderStatus",0),this.$store.commit("setOrderStatusValue","")},activated:function(){this.tableLoad(1)},deactivated:function(){this.searchData=[]},computed:Object(o["a"])({},Object(v["b"])({curStatusValue:function(t){return t.order.curStatusValue}})),watch:{curStatusValue:function(t){this.searchData.status="null"===t?"":t,t&&this.tableLoad(1)}},methods:{searchFn:function(t){this.searchData=t,this.tableLoad(1)},buttonReceiveOrder:function(t){this.visibleOrderDialog=!0,this.row=t},acceptOder:function(){var t=this;this.receiveOrder(this.row.order_id).then((function(e){200===e.data.code&&t.tableLoad(t.currentPage)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.visibleOrderDialog=!1}))},buttonOrderDetail:function(t){this.$router.push("/idea/orderDetail?order_id=".concat(t.order_id))},buttonHideOrder:function(t){this.visibleHideDialog=!0,this.row=t,this.isHidden=0==t.is_hidden?"隐藏":"取消隐藏"},submitHide:function(){var t=this;this.oderHide(this.row.order_id).then((function(e){200===e.data.code&&t.tableLoad(t.currentPage)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.visibleHideDialog=!1,t.row=""}))},sortChangeHandle:function(t){t.order?(this.order=t.prop,this.sort="descending"===t.order?"desc":"asc"):(this.order=null,this.sort=null),this.tableLoad()},tableLoad:function(t){var e=this;this.loading=!0,this.requestOrderList(t).then((function(r){200===r.data.code&&0!==r.data.data.list.length?(e.tableData=r.data.data.list,e.status_count=r.data.data.status_count,e.summaryData=r.data.data.total_data,e.total=r.data.data.pagination.total,e.currentPage=t):(e.tableData=[],e.total=0,e.TopStatus.forEach((function(t){return t.count=0})))}))["catch"]((function(t){e.loading=!1,console.warn(t)}))["finally"]((function(){e.status_count.forEach((function(t){var r=e.GetStatusCount(t.status);void 0!==r&&(e.TopStatus[r].count=Number(t.num))})),e.$refs.customizedTable&&e.$nextTick(e.$refs.customizedTable.doLayout),e.loading=!1}))},receiveOrder:function(t){return this.$http.get("order/accept",{params:{order_id:t}})},resetOrderDialog:function(){this.visibleOrderDialog=!1,this.visibleHideDialog=!1},oderHide:function(t){return this.$http.get("order/hide",{params:{order_id:t}})},requestOrderList:function(t){return this.$http.get("order/order-list",{params:{media:this.searchData.media,demand_type:this.searchData.demand_type,order_type:this.searchData.order_type,status:this.searchData.status,department_id:this.searchData.department_id,group_id:this.searchData.group_id,operation_id:this.searchData.operation_id,creatives:this.searchData.creatives,product_industry:this.searchData.product_industry,product_id:this.searchData.product_id,original:this.searchData.original,is_hidden:this.searchData.is_hidden?this.searchData.is_hidden:0,create_time:this.searchData.create_time,end_time:this.searchData.end_time,order_name:this.searchData.order_name,serial_number:this.searchData.serial_number,order:this.order,sort:this.sort,page:t,page_size:this.pageSize,type:this.type}})},getSummary:function(t){var e=this,r=t.columns,a=(t.data,[]);return r.forEach((function(t,r){0!==r?"cost"===t.property&&e.summaryData?a[r]=e.summaryData.cost:"creative_num"===t.property&&e.summaryData&&(a[r]=e.summaryData.creative?e.summaryData.creative:""):a[r]="总计"})),a}}},O=w,S=(r("6d44"),r("cba8")),H=Object(S["a"])(O,a,i,!1,null,"1a3d534d",null);e["default"]=H.exports},6860:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("c510"),r("f8c2"),r("6010"),r("e15d"),r("e4de"),r("d64c"),r("98ff");var a=r("a01c");function i(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(t,e):void 0}}},"6d44":function(t,e,r){"use strict";r("05e4")},7980:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));r("828e");var a=r("a01c");function i(t){if(Array.isArray(t))return Object(a["a"])(t)}r("74c4"),r("1f83"),r("f8c2"),r("2da9"),r("e4de"),r("b00a"),r("e15d");function o(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=r("6860");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||o(t)||Object(s["a"])(t)||n()}},"828e":function(t,e,r){var a=r("9c15"),i=r("81c6");a({target:"Array",stat:!0},{isArray:i})},"9d4e":function(t,e,r){"use strict";r("cf86")},a01c:function(t,e,r){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,"a",(function(){return a}))},cf86:function(t,e,r){},e15d:function(t,e,r){var a=r("9c15"),i=r("7c9d"),o=r("774a"),s=!o((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:s},{from:i})},f6db:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"foo"},[t.isHover?r("el-popover",{attrs:{placement:"top",width:"60",trigger:"hover"}},[r("el-button",{attrs:{type:"text",icon:"el-icon-document-copy"},on:{click:t.copy}},[t._v(" 复制 ")]),t._t("default",(function(){return[r("span",{class:"ell-"+t.row},[t._v(t._s(t.context))])]}),{slot:"reference"})],2):r("span",{staticClass:"copy",class:"ell-"+t.row,on:{click:t.copy}},[t._v(t._s(t.context))])],1)},i=[],o=(r("22f7"),{name:"CustomizedClipboard",props:{context:{type:[String,Array]},row:{type:Number,default:1,validator:function(t){return t>0&&t<5}},isHover:{type:Boolean,default:!0}},methods:{copy:function(){var t=this;this.$copyText(this.context).then((function(e){t.$message("复制成功！")}),(function(e){t.$message("复制失败...")}))}}}),s=o,n=(r("9d4e"),r("cba8")),c=Object(n["a"])(s,a,i,!1,null,"b8128b3a",null);e["default"]=c.exports}}]);