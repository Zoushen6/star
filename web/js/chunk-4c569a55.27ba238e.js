(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c569a55"],{"124f":function(t,e,a){"use strict";a("c549")},3337:function(t,e,a){},"36be":function(t,e,a){"use strict";a("38f5")},"38f5":function(t,e,a){},4005:function(t,e,a){"use strict";a("9ea1")},4238:function(t,e,a){},"5aae":function(t,e,a){"use strict";var i=a("9c15"),n=a("5008"),s=a("1c72"),o=a("059d"),r=a("d7ab"),l=a("ffb3"),c=a("2c48"),d=a("430c"),u=a("130a"),h=a("c91b"),m=a("e9db"),f=a("d006"),p=a("8289"),b=[],g=n(b.sort),y=n(b.push),v=c((function(){b.sort(void 0)})),_=c((function(){b.sort(null)})),x=u("sort"),w=!c((function(){if(f)return f<70;if(!(h&&h>3)){if(m)return!0;if(p)return p<603;var t,e,a,i,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(i=0;i<47;i++)b.push({k:e+i,v:a})}for(b.sort((function(t,e){return e.v-t.v})),i=0;i<b.length;i++)e=b[i].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}})),C=v||!_||!x||!w,k=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:l(e)>l(a)?1:-1}};i({target:"Array",proto:!0,forced:C},{sort:function(t){void 0!==t&&s(t);var e=o(this);if(w)return void 0===t?g(e):g(e,t);var a,i,n=[],l=r(e);for(i=0;i<l;i++)i in e&&y(n,e[i]);d(n,k(t)),a=n.length,i=0;while(i<a)e[i]=n[i++];while(i<l)delete e[i++];return e}})},7974:function(t,e,a){"use strict";a("982f")},"7eeb":function(t,e,a){"use strict";a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"g",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return u}));var i=a("7980"),n=(a("1ae6"),a("f904")),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new Date,i=new Date,n=e+t-1;return a.setTime(a.getTime()-864e5*n),i.setTime(i.getTime()-864e5*e),[a,i]},o=function(){var t=new Date,e=new Date,a=t.getDay()>0?t.getDay()-1:6;return e.setTime(e.getTime()-864e5*a),[e,t]},r=function(){var t=new Date,e=new Date,a=t.getDay();return e.setTime(e.getTime()-864e5*(a+6)),t.setTime(t.getTime()-864e5*a),[e,t]},l=function(){var t=new Date,e=new Date,a=t.getDate()-1;return e.setTime(e.getTime()-864e5*a),[e,t]},c=function(){var t=new Date,e=t.getDate(),a=t.getFullYear()-(t.getMonth()>0?0:1),i=(t.getMonth()+11)%12,n=new Date(a,i,1);return t.setTime(t.getTime()-864e5*e),[n,t]},d={yesterday:{label:"昨日消耗",legend:"前日环比",handler:s,params:[1,1]},lastSeven:{label:"近七日消耗",legend:"上一周期环比",handler:s,params:[7,1]},thisWeek:{label:"本周消耗",legend:"上一周环比",handler:o},thisMonth:{label:"本月消耗",legend:"上月环比",handler:l}},u=function(t){var e=d[t],a=e.params?e.params:[],s=e.handler.apply(e,Object(i["a"])(a));return s=s.map((function(t){return n["a"].getNewDay(t)})),s}},8289:function(t,e,a){var i=a("6532"),n=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},"84ef":function(t,e,a){"use strict";var i=a("9c15"),n=a("5008"),s=a("81c6"),o=n([].reverse),r=[1,2];i({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return s(this)&&(this.length=this.length),o(this)}})},"982f":function(t,e,a){},"9ea1":function(t,e,a){},"9f62":function(t,e,a){"use strict";a("4238")},c549:function(t,e,a){},c91b:function(t,e,a){var i=a("6532"),n=i.match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},e9db:function(t,e,a){var i=a("6532");t.exports=/MSIE|Trident/.test(i)},f5d1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-1 flex-vertical m-l-r-16"},[a("div",{staticClass:"basic-form"},[a("el-form",{ref:"addOptions",staticClass:"customized-form padding-top background-white p-l-r-24",attrs:{inline:!0}},[a("div",{staticClass:"flex basic"},[a("span",{staticClass:"inline-block form-title"},[t._v("基础筛选")]),a("div",{staticClass:"flex-1"},[a("el-form-item",{staticClass:"long-item"},[a("el-select",{attrs:{placeholder:"全部代理商客户 ",clearable:""},model:{value:t.company_id,callback:function(e){t.company_id=e},expression:"company_id"}},t._l(t.agentCustomerList,(function(t){return a("el-option",{key:t.company_id,attrs:{label:t.company_name,value:t.company_id}})})),1)],1),a("el-form-item",{staticClass:"search-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.search("addOptions")}}},[t._v("查询")])],1)],1)])])],1),a("div",{staticClass:"data-board home-padding background-white m-t-16 m-b-16"},[a("data-board",{ref:"dataBoard",attrs:{company_id:t.company_id}})],1),a("el-row",{attrs:{gutter:16}},[a("el-col",{staticClass:"m-b-16",attrs:{span:12,xs:24}},[a("common-cost-rank",{ref:"accountRank",staticClass:"background-white home-padding",attrs:{company_id:t.company_id,header:t.account_header,title:"账户消耗排名",module:"advertiser",xAxis_data:"name"}})],1),a("el-col",{staticClass:"m-b-16",attrs:{span:12,xs:24}},[a("common-cost-rank",{ref:"customerRank",staticClass:"background-white home-padding",attrs:{company_id:t.company_id,header:t.customer_header,module:"customer",xAxis_data:"customer_name",title:"客户消耗排名"}})],1)],1),a("el-row",{attrs:{gutter:16}},[a("el-col",{staticClass:"data-trend-ratio m-b-16",attrs:{span:14,xs:24}},[a("data-trend-ratio",{ref:"dataTrendRatio",staticClass:"background-white home-padding",attrs:{company_id:t.company_id}})],1),a("el-col",{staticClass:"cost-slice m-b-16",attrs:{span:10,xs:24}},[a("cost-slice",{ref:"costSlice",staticClass:"background-white home-padding",attrs:{company_id:t.company_id}})],1)],1),a("el-row",{staticClass:"m-b-16",attrs:{gutter:16}},[a("el-col",{staticClass:"industry-compare",attrs:{span:12,xs:24}},[a("compare-analysis",{ref:"compareTopAnalysis",staticClass:"home-padding background-white",attrs:{module:"industry",xAxis_data:"first_industry_name",company_id:t.company_id}})],1),a("el-col",{staticClass:"industry-compare",attrs:{span:12,xs:24}},[a("compare-analysis",{ref:"compareAnalysis",staticClass:"home-padding background-white",attrs:{module:"inventory",xAxis_data:"inventory",title:t.title,company_id:t.company_id}})],1)],1)],1)},n=[],s=(a("c08f"),a("f8c2"),a("09ed"),a("509f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100"},[a("span",{staticClass:"form-title"},[t._v("数据看板")]),a("el-form",{staticClass:"customized-form inline-block"},[a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"昨日"},on:{change:t.selectDate},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},t._l(t.AllDate,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label.substring(0,t.label.length-2),value:e}})})),1)],1)],1),a("div",{staticClass:"data-list"},[a("div",{staticClass:"flex-space-between"},t._l(t.data,(function(e,i){return a("span",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"item.loading"}],key:i,staticClass:"list-item inline-block"},[a("p",{staticClass:"item-top"},[t._v(" "+t._s(t.headListReduce[i])+" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("span",{staticClass:"inline-block",staticStyle:{width:"170px","line-height":"18px"},attrs:{slot:"content"},slot:"content"},[t._v("当前实时"+t._s(t.headListReduce[i])+"，与时间筛选不联动")]),t.showIcon(i)?a("span",{staticClass:"pointer"},[a("svg-icon",{attrs:{"icon-name":"question"}})],1):t._e()])],1),a("p",{staticClass:"item-middle"},[t._v(t._s(e.data.now))]),e.data.last?a("p",{staticClass:"item-bottom flex-space-between"},[a("span",{staticClass:"date-item"},[t._v(t._s(t.AllDate[t.date].legend.substring(0,t.AllDate[t.date].legend.length-2))),a("i",[t._v(t._s(e.data.last))])]),a("span",[t._v("环比 "),a("i",{class:e.data.uad?"red-color":"green-color"},[t._v(t._s((e.data.uad?"+":"")+Number(e.data.circleRatio).toFixed(0)+"%"))])])]):t._e()])})),0)])],1)}),o=[],r=(a("4bce"),{data:function(){return{date:[],chart:null,loading:!1}},mounted:function(){},beforeDestroy:function(){window.removeEventListener("resize",this.resizeChartMethod)},methods:{resizeChart:function(){window.addEventListener("resize",this.resizeChartMethod)},resizeChartMethod:function(){this.chart.resize()}}}),l=a("7eeb"),c={data_cost:{cost:"总消耗",grants_cost:"赠款消耗"},data_cost_customer:{cost_customer:"有消耗客户数"},data_cost_advertiser:{cost_advertiser:"有消耗帐户数"},data_customer:{customer:"广告主客户数"},data_advertiser:{advertiser:"广告主帐户数"}},d={cost:{data:{now:"0",last:"0",circleRatio:0,uad:0},loading:!1},grants_cost:{data:{now:"0",last:"0",circleRatio:0,uad:0},loading:!1},cost_customer:{data:{now:"0",last:"0",circleRatio:0,uad:0},loading:!1},cost_advertiser:{data:{now:"0",last:"0",circleRatio:0,uad:0},loading:!1},customer:{data:{now:"0"},loading:!1},advertiser:{data:{now:"0"},loading:!1}},u={name:"DataBoard",mixins:[r],props:{company_id:""},computed:{headList:function(){return c},headListReduce:function(){return Object.keys(c).reduce((function(t,e){var a=c[e];return Object.keys(a).reduce((function(t,e){return t[e]=a[e],t}),t)}),{})}},mounted:function(){this.selectDate()},data:function(){return{date:"yesterday",AllDate:l["a"],data:d}},methods:{searchFn:function(){this.selectDate()},showIcon:function(t){return"customer"===t||"advertiser"===t},selectDate:function(){var t=this;this.loading=!0,Object.keys(c).forEach((function(e){var a=c[e];Object.keys(a).forEach((function(e){return t.data[e].loading=!0})),t.axiosList(e).then((function(a){if(a&&200===a.data.code){var i=c[e];Object.keys(i).forEach((function(e){return t.data[e].data=a.data.data.list[e]}))}}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){var a=c[e];Object.keys(a).forEach((function(e){return t.data[e].loading=!1}))}))}))},axiosList:function(t){return this.$http.get("/report/finance/data",{params:{date_type:this.date,company_id:this.company_id,module:t}})}}},h=u,m=(a("4005"),a("cba8")),f=Object(m["a"])(h,s,o,!1,null,"771ec45b",null),p=f.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[a("div",[a("span",{staticClass:"form-title"},[t._v(t._s(t.title))]),a("el-form",{staticClass:"customized-form inline-block f-r",attrs:{inline:!0}},[a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"昨日"},on:{change:t.listLoad},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},t._l(t.AllDate,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label.substring(0,t.label.length-2),value:e}})})),1)],1),t._l(t.buttonList,(function(e){return a("el-form-item",{key:e.value,staticClass:"chart-table-button",attrs:{size:"mini"}},[a("el-button",{class:t.buttonStyle==e.value?"button-active":"",on:{click:function(a){return t.buttonClick(e.value)}}},[a("span",{staticClass:"iconfont",class:e.iconName})])],1)}))],2)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"chart"===t.buttonStyle,expression:"buttonStyle === 'chart'"}],ref:"chart",class:t.list&&t.list.length?"":"empty-chart",staticStyle:{height:"388px"}}),a("customized-table",{directives:[{name:"show",rawName:"v-show",value:"table"===t.buttonStyle,expression:"buttonStyle === 'table'"}],staticClass:"customized-table white-table mini-table has-border without-pagination",attrs:{"max-height":null,showPagination:!1,Data:t.list,Header:t.header},scopedSlots:t._u([{key:"rank",fn:function(e){var i=e.row;return[t.showRankIcon(t.list.indexOf(i)+1)?a("svg-icon",{attrs:{"icon-name":t.rankIcons[t.list.indexOf(i)+1]}}):t._e(),a("span",{class:t.showRankIcon(t.list.indexOf(i)+1)?"offset":""},[t._v(t._s(t.list.indexOf(i)+1))])]}},{key:"circleRatio",fn:function(e){var i=e.row;return[a("span",[t._v(t._s(i.circleRatio.toFixed(2)+"%"))])]}}])})],1)},g=[],y=(a("22f7"),a("6aee")),v={xAxis:{type:"category",data:[],axisLabel:{interval:0,rotate:45,formatter:function(t){return t.length>7?t.substring(0,7)+"...":t}},axisTick:{show:!1},axisLine:{show:!1}},yAxis:[{type:"value",min:0,position:"left",axisLabel:{formatter:"{value}"},splitLine:{lineStyle:{color:"#ebebeb"}}}],grid:{left:"3%",right:"4%",bottom:"5%",containLabel:!0},tooltip:{trigger:"axis",textStyle:{fontWeight:"normal"}},series:[{name:"总消耗",data:[],type:"bar",barWidth:28,symbolSize:8,symbol:"circle",itemStyle:{color:"#4063DF",borderColor:"#4063DF"}}]},_={1:"champion",2:"second",3:"third"},x={name:"CommonCostRank",props:{company_id:[String,Number],header:Array,title:String,xAxis_data:String,module:String},mixins:[r],created:function(){},computed:{rankIcons:function(){return _}},data:function(){return{date:"yesterday",option:{},list:[],AllDate:l["a"],buttonList:[{iconName:"icon-chart",value:"chart"},{iconName:"icon-table",value:"table"}],buttonStyle:"chart"}},mounted:function(){this.option=this.$common.deepCopy(v,this.option),this.initChart(),this.listLoad()},methods:{searchFn:function(){this.listLoad()},buttonClick:function(t){this.buttonStyle=t,"chart"===this.buttonStyle&&this.paintChart()},initChart:function(){this.chart=y["a"](this.$refs.chart),this.resizeChart()},paintChart:function(){this.optionData(this.list),this.chart.clear(),this.chart.setOption(this.option,!0)},showRankIcon:function(t){return t<=3},axiosList:function(){return this.$http.get("/report/finance/data",{params:{date_type:this.date,company_id:this.company_id,module:this.module}})},optionData:function(t){var e=this,a=[],i=[];t.forEach((function(t){a.push(t[e.xAxis_data]),i.push(t["cost"])})),this.option.xAxis.data=a,this.option.series[0].data=i},listLoad:function(){var t=this;this.loading=!0,this.axiosList().then((function(e){e&&200===e.data.code&&(t.list=e.data.data.list)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.loading=!1,t.buttonClick(t.buttonStyle)}))}}},w=x,C=(a("36be"),Object(m["a"])(w,b,g,!1,null,"1ae678e4",null)),k=C.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",[a("span",{staticClass:"form-title"},[t._v("数据趋势对比")]),a("el-form",{staticClass:"customized-form inline-block f-r",attrs:{inline:!0}},[a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleSelect},model:{value:t.firstItem,callback:function(e){t.firstItem=e},expression:"firstItem"}},t._l(t.radioList,(function(e,i){return a("el-option",{key:i,attrs:{label:e.label,disabled:t.secondItem===i,value:i}})})),1)],1),a("span",{staticClass:"radio-text"},[t._v("对比")]),a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleSelect},model:{value:t.secondItem,callback:function(e){t.secondItem=e},expression:"secondItem"}},t._l(t.radioList,(function(e,i){return a("el-option",{key:i,attrs:{label:e.label,disabled:t.firstItem===i,value:i}})})),1)],1),a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"近七日"},on:{change:t.handleSelect},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},t._l(t.allDate,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label.substring(0,t.label.length-2),value:e}})})),1)],1)],1)],1),a("div",{ref:"chart",class:t.list&&t.list.length?"":"empty-chart",staticStyle:{height:"400px"}})])},S=[],A=(a("1ae6"),a("6010"),{tooltip:{trigger:"axis",textStyle:{fontWeight:"normal"}},legend:{x:"center",y:"bottom",itemGap:30,itemWidth:17,itemHeight:8,data:["总消耗","转化成本"],itemStyle:{borderWidth:1.5}},grid:{left:"3%",right:"4%",bottom:"11%",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,data:[],axisTick:{show:!0,inside:!0,lineStyle:{color:"#EBEBEB"}},axisLabel:{},axisLine:{show:!1}},yAxis:[{type:"value",nameLocation:"end",axisTick:{show:!1},splitLine:{lineStyle:{color:"#ebebeb"}}},{type:"value",axisTick:{show:!1},splitLine:{show:!1}}],series:[{name:"总消耗",type:"line",symbolSize:8,showSymbol:!1,itemStyle:{color:"#2B4DFF",borderColor:"#2B4DFF"},data:[]},{name:"转化成本",type:"line",symbolSize:8,showSymbol:!1,itemStyle:{color:"#FFA34B",borderColor:"#FFA34B"},yAxisIndex:1,data:[]}]}),L={name:"DataTrendRatio",mixins:[r],props:{company_id:String},computed:{allDate:function(){var t=Object.assign({},l["a"]);return delete t.yesterday,t},selectItem:function(){return[this.firstItem,this.secondItem]}},data:function(){return{date:"lastSeven",option:A,list:[],firstItem:"cost",secondItem:"convert_cost",radioList:{cost:{label:"总消耗"},convert_cost:{label:"转化成本"},company:{label:"有消耗公司"},advertiser:{label:"有消耗账户"},grants_cost:{label:"赠款消耗"}}}},mounted:function(){this.initChart(),this.handleSelect()},methods:{searchFn:function(){this.handleSelect()},handleSelect:function(){var t=this;this.loading=!0,this.axiosList().then((function(e){e&&200===e.data.code&&(t.list=e.data.data.list)}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.loading=!1,t.paintChart()}))},optionData:function(t){var e=this,a=this.selectItem.map((function(t){return e.radioList[t].label}));this.option.legend.data=this.chartData,this.option.series[0].name=a[0],this.option.series[1].name=a[1];var i=[],n=[],s=[];t.forEach((function(t){i.push(t["stat_datetime"]),n.push(t[e.selectItem[0]]),s.push(t[e.selectItem[1]])})),this.option.xAxis.data=i,this.option.series[0].data=n,this.option.series[1].data=s},initChart:function(){this.chart=y["a"](this.$refs.chart),this.resizeChart()},paintChart:function(){this.optionData(this.list),this.chart.clear(),this.chart.setOption(this.option,!0)},axiosList:function(){return this.$http.get("/report/finance/data",{params:{date_type:this.date,contrast_one:this.selectItem[0],contrast_two:this.selectItem[1],company_id:this.company_id,module:"trend"}})}}},T=L,O=(a("9f62"),Object(m["a"])(T,D,S,!1,null,"79ec6e24",null)),I=O.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("span",{staticClass:"form-title"},[t._v("广告主客户消耗分层")]),a("div",{ref:"chart",class:t.chartData&&t.chartData.length?"":"empty-chart",staticStyle:{height:"400px"}})])},z=[],E=(a("84ef"),{dataset:{source:[{cost:"0元<近三日平均消耗<500元",total:0,ratio:0},{cost:"500元<=近三日平均消耗<1000元",total:0,ratio:0},{cost:"1000元<=近三日平均消耗<5000元",total:0,ratio:0},{cost:"近三日平均消耗>=5000元",total:0,ratio:0}]},yAxis:{type:"category",axisTick:{show:!1},axisLine:{show:!1}},xAxis:{type:"value",show:!1},grid:{left:"1%",right:"5%",top:"5%",bottom:"0",containLabel:!0},series:[{name:"总消耗",type:"bar",barWidth:28,symbolSize:8,symbol:"circle",itemStyle:{color:function(t){var e=["#E3E8FA","#C5D0F5","#A2B5F8","#859BEA"];return e[t.dataIndex]}},emphasis:{itemStyle:{color:"inherit"}},label:{show:!0,position:"insideLeft",color:"#333333",formatter:function(t){return t.data.total+"家 ("+t.data.ratio+"%)"}},encode:{x:["ratio"],y:["cost"]}}]}),R={name:"CostSlice",mixins:[r],props:{company_id:{type:[Number,String]},module:String},data:function(){return{option:E,chartData:[]}},mounted:function(){this.initChart(),this.costSliceData()},methods:{searchFn:function(){this.costSliceData()},initChart:function(){this.chart=y["a"](this.$refs.chart),this.resizeChart()},setOptions:function(){this.chart.clear();var t=this.option;this.chartData.reverse().forEach((function(e,a){t.dataset.source[a].total=e.num,t.dataset.source[a].ratio=e.radio})),this.chart.setOption(t,!0)},costSliceData:function(){var t=this;this.loading=!0,this.$http.get("/report/finance/data",{params:{date_type:"lastThree",module:"layer",company_id:this.company_id}}).then((function(e){200===e.data.code&&(t.chartData=e.data.data.list,t.chartData&&t.chartData.length&&t.setOptions())}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.loading=!1}))}}},N=R,$=Object(m["a"])(N,F,z,!1,null,"3f3808cc",null),j=$.exports,B=[{prop:"rank",label:"TOP名次",showSlot:!0,width:"80",slotName:"rank",align:"center"},{prop:"name",showTooltip:!0,label:"账户名称",align:"center"},{prop:"cost",label:"总消耗",showTooltip:!0,align:"center"},{prop:"circleRatio",showTooltip:!0,showSlot:!0,label:"消耗环比",width:"120",align:"center",slotName:"circleRatio"}],W=[{prop:"rank",label:"TOP名次",showSlot:!0,width:"80",slotName:"rank",align:"center"},{prop:"customer_name",showTooltip:!0,label:"客户名称",align:"center"},{prop:"cost",showTooltip:!0,label:"总消耗",align:"center"},{prop:"circleRatio",showTooltip:!0,width:"120",showSlot:!0,label:"消耗环比",align:"center",slotName:"circleRatio"}],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("span",{staticClass:"form-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"inline-block f-r"},[a("el-form",{staticClass:"customized-form inline-block",attrs:{inline:!0}},[a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleCompareData},model:{value:t.costValue,callback:function(e){t.costValue=e},expression:"costValue"}},t._l(t.costList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:e}})})),1)],1),a("el-form-item",{staticClass:"short-item"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleCompareData},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},t._l(t.AllDate,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label.substring(0,t.label.length-2),value:e}})})),1)],1)],1)],1),a("div",{ref:"chart",class:t.chartData&&t.chartData.length?"":"empty-chart",staticStyle:{height:"455px"}})])},V=[],H=(a("5aae"),{xAxis:{type:"category",data:[],axisLabel:{interval:0,rotate:45,formatter:function(t){var e=t;return e.length>7&&(e=e.substring(0,7)+"..."),e}},axisTick:{show:!1},axisLine:{show:!1}},yAxis:[{type:"value",position:"right",axisLabel:{formatter:"{value}%"},splitLine:{show:!1}},{type:"value",position:"left",axisLabel:{formatter:"{value}"},splitLine:{lineStyle:{color:"#ebebeb"}}}],grid:{left:"4%",right:"4%",top:"10%",bottom:"10%",containLabel:!0},tooltip:{trigger:"axis",textStyle:{fontWeight:"normal"}},legend:{bottom:"1%",left:"36%",itemGap:30,itemWidth:17,itemHeight:8,data:["总消耗","上一周期环比"],itemStyle:{borderWidth:1.5}},series:[{name:"总消耗",data:[],type:"bar",barWidth:28,symbolSize:8,yAxisIndex:1,itemStyle:{color:"#4063DF",borderColor:"#4063DF"}},{name:"上一周期环比",data:[],type:"line",symbolSize:8,yAxisIndex:0,showSymbol:!1,itemStyle:{color:"#40D2C4",borderColor:"#40D2C4"}}]}),G={name:"CompareAnalysis",mixins:[r],props:{title:{type:String,default:"行业Top5对比分析"},company_id:{type:[Number,String]},module:String,xAxis_data:String},data:function(){return{date:"lastSeven",option:H,AllDate:l["a"],costValue:"cost",costList:{cost:{value:"总消耗"},convert_cost:{value:"转化成本"}},chartData:[]}},mounted:function(){this.initChart(),this.handleCompareData()},methods:{searchFn:function(){this.compareData()},handleCompareData:function(){this.compareData(),this.modifyOption()},modifyOption:function(){this.option.legend.data[0]=this.costList[this.costValue].value,this.option.series[0].name=this.costList[this.costValue].value,this.option.legend.data[1]=this.AllDate[this.date].legend,this.option.series[1].name=this.AllDate[this.date].legend},initChart:function(){this.chart=y["a"](this.$refs.chart),this.resizeChart()},setOptions:function(){var t=this;this.chart.clear();var e=this.option;e.xAxis.data=this.chartData.map((function(e){return e[t.xAxis_data]})),e.series.forEach((function(e,a){e.data=t.chartData.map((function(t){return 0===a?t.cost:t.rise}))})),this.chart.setOption(e,!0)},compareData:function(){var t=this;this.loading=!0,this.$http.get("/report/finance/data",{params:{module:this.module,date_type:this.date,filter:this.costValue,company_id:this.company_id}}).then((function(e){200===e.data.code&&(t.chartData=e.data.data.list.sort((function(t,e){return e.cost-t.cost})),t.setOptions())}))["catch"]((function(t){console.warn(t)}))["finally"]((function(){t.loading=!1}))}}},P=G,J=(a("fe52"),Object(m["a"])(P,M,V,!1,null,"43da5032",null)),K=J.exports,q={name:"HomePage",mixins:[r],components:{CostSlice:j,dataBoard:p,commonCostRank:k,dataTrendRatio:I,CompareAnalysis:K},mounted:function(){this.handleAgent()},data:function(){return{title:"投放平台对比分析",account_header:B,customer_header:W,agentCustomerList:{},company_id:""}},methods:{handleAgent:function(){var t=this;this.$http.get("/report/finance/get-labels").then((function(e){200===e.data.code&&(t.agentCustomerList=e.data.data.company)}))},search:function(){var t=this;Object.keys(this.$refs).forEach((function(e){var a=t.$refs[e];a.searchFn&&"function"===typeof a.searchFn&&a.searchFn()}))}}},Y=q,Q=(a("124f"),a("7974"),Object(m["a"])(Y,i,n,!1,null,"1e1e3d1d",null));e["default"]=Q.exports},fe52:function(t,e,a){"use strict";a("3337")}}]);