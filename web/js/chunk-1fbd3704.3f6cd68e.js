(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fbd3704"],{"211d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("customized-dialog",{attrs:{title:"提示",width:507,visible:t.dialogVisible},on:{close:t.closeDialog}},[a("p",[t._v("正在上传中，请耐心等待...")])])},o=[],l=a("6b9a"),r={name:"CustomizedUploadFile",mixins:[l["a"]]},s=r,n=a("cba8"),d=Object(n["a"])(s,i,o,!1,null,"195dc27c",null);e["a"]=d.exports},"33e0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex-vertical setting-box flex-1 overflow-hidden"},[a("router-link",{staticClass:"uniform-link iconfont",attrs:{to:t.fromPath}},[t._v("返回到素材库")]),a("el-form",{ref:"uploadRuleForm",staticClass:"upload-file p-l-r-32 background-white",attrs:{model:t.uploadRuleForm,rules:t.uploadRules,"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"产品名称",prop:"productName"}},[a("el-select",{attrs:{placeholder:"请选择",prop:"productName"},model:{value:t.uploadRuleForm.productName,callback:function(e){t.$set(t.uploadRuleForm,"productName",e)},expression:"uploadRuleForm.productName"}},t._l(t.productNameType,(function(t){return a("el-option",{key:t.id,attrs:{label:t.item,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"行业名称",prop:"industryName"}},[a("el-select",{attrs:{placeholder:"请选择",prop:"industryName"},model:{value:t.uploadRuleForm.industryName,callback:function(e){t.$set(t.uploadRuleForm,"industryName",e)},expression:"uploadRuleForm.industryName"}},t._l(t.productIndustry,(function(t){return a("el-option",{key:t.id,attrs:{label:t.item,value:t.id}})})),1)],1),a("div",{staticClass:"material"},[t._v("上传素材")]),a("el-upload",{ref:"upload",staticClass:"flex-1",attrs:{drag:!0,action:"https://jsonplaceholder.typicode.com/posts/",accept:"/idea/material/videoLibrary"===this.fromPath?t.fileType.video:t.fileType.image,"on-change":t.uploadSuccess,"before-upload":t.beforeUpload,"auto-upload":!1,"show-file-list":!1,multiple:""},nativeOn:{drop:function(e){return t.beforeUpload.apply(null,arguments)}}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])],1),0!==t.tableData.length?a("div",{staticClass:"table-content flex-1 flex-vertical p-l-r-32 background-white"},[a("customized-table",{ref:"customizedTable",staticClass:"flex-1 overflow-hidden w-100 customized-table without-pagination",attrs:{loading:t.loading,Data:t.tableData,Header:t.header,showPagination:!1,"table-height":"100%"},on:{deleteFile:t.handleDelete},scopedSlots:t._u([{key:"video",fn:function(e){var i=e.row;return[a("el-popover",{attrs:{"popper-class":"disable-padding",placement:"right-end",width:"200",trigger:"hover"}},["image"==i.type?a("div",[a("div",{staticClass:"img-url"},[a("el-image",{attrs:{src:i.fileUrl}})],1)]):"video"==i.type?a("div",{staticClass:"videoColumn"},[a("div",{staticClass:"left"},[a("video",{attrs:{src:i.fileUrl,width:"330",height:"179",controls:""}})])]):t._e(),a("span",{attrs:{slot:"reference"},slot:"reference"},["image"==i.type?a("div",[a("div",{staticClass:"img-url"},[a("el-image",{attrs:{src:i.fileUrl}})],1)]):"video"==i.type?a("div",{staticClass:"inline-block"},[a("video",{attrs:{src:i.fileUrl,width:"126",height:"72"}})]):t._e()])])]}}],null,!1,2931549637)}),a("el-button",{staticClass:"finish customized-button m-t-10 m-b-10",attrs:{type:"primary"},on:{click:function(e){return t.handleSuccess("uploadRuleForm")}}},[t._v("完成")])],1):a("el-collapse",{staticClass:"flex-1 overflow-auto el-collapse-arrow-text p-l-r-32 background-white",model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"素材格式说明：",name:"1"}},[a("div",{staticClass:"descriptions"},[a("p",[t._v("头条素材规格说明：横版视频： 封面图宽高比1.78（下限：1280 * 720，上限：2560 * 1440）,视频资源支持mp4、mpeg、3gp、avi文件格式，宽高比16:9，大小不超过500M。")]),a("p",[t._v(" 竖版视频： 封面图宽高比0.56（9:16），下限：720 * 1280，上限：1440 * 2560，视频资源支持mp4、mpeg、3gp、avi文件格式，大小不超过500M。")]),a("p",[t._v(" 横版大图： 宽高比1.78，大小1.5M以下，下限：1280 * 720，上限：2560 * 1440。")]),a("p",[t._v("竖版大图：宽高比0.56（9:16），大小1.5M以下，下限：720 * 1280，上限：1440 * 2560。")]),a("p",[t._v("小图： 宽高比1.52，大小1.5M以下，下限：456 * 300，上限：1368 * 900。")]),a("p",[t._v("快手素材规格说明：竖版视频： 分辨率≥720p，码率≥1000kbps，帧率≥20fps，音频码率≥64kbps，时长5s-10mins，格式MP4，小于100M。")]),a("p",[t._v("横版视频： 分辨率≥720p，码率≥1000kbps，帧率≥20fps，音频码率≥64kbps，时长5s-10mins，格式MP4，小于100M。")]),a("p",[t._v("竖版图片： 宽高尺寸大于等于720*1280，小于等于1440*2560，宽高比9:16，支持格式jpg/jpeg/png，大小≤2M。")])])])],1),a("customized-upload-file-loading",{ref:"uploadLoading"}),a("customized-upload-file-success",{ref:"uploadSuccess",attrs:{upload:!0},on:{dialogClose:t.resetTableData}})],1)},o=[],l=a("cc64"),r=(a("ecb9"),a("f8c2"),a("c08f"),a("09ed"),a("509f"),a("1ae6"),a("e4de"),a("b00a"),a("d64c"),a("2657"),a("a36c"),a("a3ad"),a("5456"),a("4ff3")),s=a.n(r);a("c183");function n(t){return t>=1073741824?t=t/1073741824..toFixed(2)+"GB":t>=1048576?t=(t/1048576).toFixed(2)+"MB":1048576>=t&&t>=1024?t=(t/1024).toFixed(2)+"KB":t+="B",t}var d=function(t){return n(t.size)},c=[{prop:"raw",label:"上传列表",width:"auto",showSlot:!0,slotName:"video"},{prop:"size",label:"文件大小",width:"auto",formatter:d},{prop:"name",label:"文件名称",width:"auto"},{prop:"operate",label:"操作",width:"auto",showSlot:!0,slotName:"button",childSlots:[{slotName:"deleteFile",buttonName:"删除"}]}],u=a("7736"),p=a("2460"),f=a("d360"),m=a("9ffb"),h=a("5146"),v=a("211d"),b=a("575c"),g={name:"UploadMaterial",components:{CustomizedDialog:p["default"],CustomizedUploadFileLoading:v["a"],CustomizedUploadFileSuccess:b["a"]},mixins:[f["a"],m["a"]],created:function(){this.header=c},deactivated:function(){this.$refs.uploadRuleForm.resetFields(),this.tableData=[],this.$refs.upload.clearFiles()},data:function(){return{fileType:h["a"],uploadRuleForm:{productName:"",industryName:""},uploadRules:{productName:[{required:!0,message:"请选择产品名称"}],industryName:[{required:!0,message:"请选择行业名称"}]},tableData:[],loading:!1,activeNames:["1"],fromPath:"/idea/material/videoLibrary",isUpload:!1,isSuccess:!1}},computed:Object(l["a"])({},Object(u["b"])({token:function(t){return t.global.token}})),beforeRouteEnter:function(t,e,a){a((function(t){t.recordFromPath(e)}))},beforeRouteUpdate:function(t,e,a){this.recordFromPath(e),a()},methods:{resetTableData:function(){this.tableData=[],this.$refs.uploadRuleForm.resetFields()},recordFromPath:function(t){t.matched.some((function(t){return"/idea/material"===t.path}))&&(this.fromPath=t.fullPath)},commonDelivery:function(t){var e=this,a={product_id:this.uploadRuleForm.productName,industry_id:this.uploadRuleForm.industryName},i=new FormData;Object.keys(a).forEach((function(t){i.append(t,a[t])}));var o=this.tableData.map((function(a,o){return e.revoke(a.fileUrl),i["delete"]("file"),i.append("file",a.raw),s()({url:t,method:"post",data:i,processData:!1,contentType:!1,headers:{Authorization:e.token}})}));return Promise.all(o)},uploadSuccess:function(t){t.type=t.raw.type.split("/")[0],t.fileUrl=URL.createObjectURL(t.raw),0===this.tableData.length&&(this.bottom=52,this.$nextTick(this.getOffset)),this.tableData.push(t)},beforeUpload:function(t){var e=t.dataTransfer.files[0].type.split("/")[0];("/idea/material/videoLibrary"===this.fromPath&&"image"==e||"/idea/material/pictureLibrary"===this.fromPath&&"video"==e)&&this.$message.warning("上传的文件类型有误")},revoke:function(t){URL.revokeObjectURL(t)},handleDelete:function(t){this.revoke(t.fileUrl),this.tableData=this.tableData.filter((function(e){return e.uid!==t.uid})),this.tableData.forEach((function(t){t.type=t.raw.type.split("/")[0],t.fileUrl=URL.createObjectURL(t.raw)})),this.$refs.upload.clearFiles()},handleSuccess:function(){var t=this;this.$refs.uploadRuleForm.validate((function(e){e?(t.$refs.uploadLoading.openDialog(),t.commonDelivery("/media/media/upload").then((function(e){var a=[];e.forEach((function(t){200!==t.data.code&&a.push(t)})),t.$refs.uploadLoading.closeDialog(),0===a.length?t.$refs.uploadSuccess.openDialog():a.forEach((function(e){t.$message(e.data.msg)}))}))):t.$message({message:"你还有必选项未填！",type:"warning"})}))}}},y=g,w=(a("916f"),a("cba8")),_=Object(w["a"])(y,i,o,!1,null,"87ead680",null);e["default"]=_.exports},"3c42":function(t,e,a){var i=a("9c15"),o=a("8655"),l=a("24bc"),r=a("51c1"),s=a("6532"),n=a("b072"),d=/MSIE .\./.test(s),c=o.Function,u=function(t){return function(e,a){var i=arguments.length>2,o=i?n(arguments,2):void 0;return t(i?function(){l(r(e)?e:c(e),this,o)}:e,a)}};i({global:!0,bind:!0,forced:d},{setTimeout:u(o.setTimeout),setInterval:u(o.setInterval)})},5146:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var i={image:".jpg,.jpeg,.png,.JPG,.JPEG,.PNG",video:".mp4,.MPEG,.AVI,.nAVI,.ASF,.MOV,.3GP,.WMV,.DivX,.XviD,.RM,.RMVB,.FLV,.F4V"}},"575c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("customized-dialog",{attrs:{title:"提示",width:507,visible:t.dialogVisible},on:{close:t.closeDialog}},[a("div",{staticClass:"uploads"},[a("p",{staticClass:"titles"},[a("span",{staticClass:"iconfont"},[t._v("")]),a("span",{staticClass:"content"},[t._v("恭喜您，上传成功！")])]),t.upload?a("p",{staticClass:"upload-btn"},[a("el-button",{attrs:{type:"primary"},on:{click:t.continueUpload}},[t._v("继续上传")])],1):t._e()])])},o=[],l=a("6b9a"),r={name:"CustomizedUploadFileSuccess",mixins:[l["a"]],props:{upload:{type:Boolean,default:!1}},methods:{continueUpload:function(){this.closeDialog()}}},s=r,n=(a("ac20"),a("cba8")),d=Object(n["a"])(s,i,o,!1,null,"2ed8df08",null);e["a"]=d.exports},"6b9a":function(t,e,a){"use strict";e["a"]={data:function(){return{dialogVisible:!1,dialogTitle:""}},methods:{openDialog:function(){this.dialogVisible=!0},closeDialog:function(){this.dialogVisible=!1,this.$emit("dialogClose")}}}},"916f":function(t,e,a){"use strict";a("faf0")},"9ffb":function(t,e,a){"use strict";a("acb0");var i=a("ddfc");e["a"]={mixins:[i["a"]],data:function(){return{offset:100,bottom:0,handler:null}},computed:{tableStyle:function(){return{height:"calc(100% - ".concat(this.offset+this.bottom,"px)")}}},mounted:function(){this.handler=this.throttleHandler(this.getOffset),this.getOffset(),this.addEventListener()},activated:function(){this.getOffset()},destroyed:function(){this.clearEventListener()},methods:{getOffset:function(){if(this.$refs.customizedTable){var t=this.$refs.customizedTable.$el;this.offset=t.offsetTop-t.parentElement.offsetTop}},throttleHandler:function(t){return this.throttle.bind(this,t,this,200)},addEventListener:function(){window.addEventListener("resize",this.handler)},clearEventListener:function(){window.removeEventListener("resize",this.handler)}}}},ac20:function(t,e,a){"use strict";a("fe64")},d360:function(t,e,a){"use strict";e["a"]={data:function(){return{channels:[{item:"头条数据",id:1},{item:"快手数据",id:2}],materialType:[],mediaType:[],orderType:[],operation:[],optimizer:[],material_optimizer:[],optimizerGroup:[],productNameType:[],isHidden:[{label:"已隐藏",value:"1"},{label:"未隐藏",value:"0"}],productIndustry:[],groupType:[],demandType:[],productLineOptions:[{label:"华为",value:"华为"},{label:"小米",value:"小米"}],departmentType:[],needRuleForm:{group_id:""},memberList:[],origins:[{label:"订单",value:0},{label:"本地",value:1}],labelList:[]}},mounted:function(){this.handleProductID(),this.handleGroupID(),this.handleDepartment(),this.handleOperation(),this.handleOptimizer(),this.handleOptimizerGroup(),this.handleMemberList(),this.handleLabelList(),this.handleMaterialOptimizer()},methods:{handleLabelList:function(){var t=this;return this.$http.get("/media/media/label-list",{params:{}}).then((function(e){e&&(t.labelList=e.data.data)}))},handleProductID:function(){var t=this;this.$http.get("/order/order-dictionary",{params:{order:"id",sort:"asc"}}).then((function(e){200===e.data.code&&(t.materialType=e.data.data.material_type,t.mediaType=e.data.data.media,t.orderType=e.data.data.order_type,t.productNameType=e.data.data.product_name,t.productIndustry=e.data.data.product_industry,t.demandType=e.data.data.demand_type)}))},handleOperation:function(){var t=this;this.$http.get("/role/operation-list").then((function(e){200===e.data.code&&(t.operation=e.data.data)}))},handleOptimizer:function(){var t=this;this.$http.get("/role/optimizer-list").then((function(e){200===e.data.code&&(t.optimizer=e.data.data)}))},handleMaterialOptimizer:function(){var t=this;this.$http.get("/role/uploader-list").then((function(e){200===e.data.code&&(t.material_optimizer=e.data.data)}))},handleOptimizerGroup:function(){var t=this;this.$http.get("/role/optimizer-group-list").then((function(e){200===e.data.code&&(t.optimizerGroup=e.data.data.list.options)}))},handleGroupID:function(){var t=this;this.$http.get("/group/list",{params:{order:"create_time",sort:"desc",page_size:100}}).then((function(e){200===e.data.code&&(t.groupType=e.data.data.list)}))},handleDepartment:function(){var t=this;this.$http.get("/department/list").then((function(e){200===e.data.code&&(t.departmentType=e.data.data)}))},handleMemberList:function(){var t=this;this.$http.get("/role/list").then((function(e){200===e.data.code&&(t.memberList=e.data.data)}))}}}},ddfc:function(t,e,a){"use strict";a("3c42"),a("8c17");e["a"]={data:function(){return{timerId:0}},methods:{throttle:function(t,e,a){for(var i=arguments.length,o=new Array(i>3?i-3:0),l=3;l<i;l++)o[l-3]=arguments[l];clearTimeout(e.timerId),a=a||200,e.timerId=setTimeout((function(){t.apply(e,o)}),a)},clearTimer:function(){clearTimeout(this.timerId)}},destroyed:function(){this.clearTimer()}}},ecb9:function(t,e,a){"use strict";var i=a("9c15"),o=a("9901").some,l=a("130a"),r=l("some");i({target:"Array",proto:!0,forced:!r},{some:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},faf0:function(t,e,a){},fe64:function(t,e,a){}}]);